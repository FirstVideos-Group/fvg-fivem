<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8"/>
    <title>fvg-autoshop ‚Äì Export dokument√°ci√≥</title>
    <link rel="stylesheet" href="https://use.hugeicons.com/font/icons.css"/>
    <style>
        :root {
            --bg:#0a0c12; --card:#161b24; --code:#0f172a; --border:#1e293b;
            --tp:#f1f5f9; --ts:#94a3b8; --tm:#475569; --ac:#38bdf8;
            --success:#22c55e; --warning:#f59e0b; --danger:#ef4444; --purple:#a855f7;
            --font:'Segoe UI',system-ui,sans-serif;
        }
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            background: var(--bg); color: var(--tp); font-family: var(--font);
            padding: 48px 28px 120px; max-width: 1020px; margin: 0 auto;
        }
        h1  { font-size: 28px; font-weight: 800; margin-bottom: 6px; }
        .sub{ color: var(--tm); font-size: 14px; line-height: 1.7; margin-bottom: 48px; }
        .badge {
            display: inline-block; background: rgba(56,189,248,.12); color: var(--ac);
            font-size: 11px; font-weight: 700; padding: 2px 10px; border-radius: 20px;
            letter-spacing: .05em; margin-left: 10px; border: 1px solid rgba(56,189,248,.25);
        }
        section { margin-bottom: 44px; }
        .st {
            font-size: 11px; font-weight: 700; color: var(--tm); text-transform: uppercase;
            letter-spacing: .1em; border-bottom: 1px solid var(--border);
            padding-bottom: 10px; margin-bottom: 16px;
        }
        .card {
            background: var(--card); border: 1px solid var(--border);
            border-radius: 10px; padding: 22px 24px; margin-bottom: 14px;
        }
        .sig {
            font-family: monospace; font-size: 13px; font-weight: 700;
            color: var(--ac); margin-bottom: 6px; line-height: 1.9;
        }
        .side {
            display: inline-block; font-size: 10px; font-weight: 700;
            padding: 2px 8px; border-radius: 4px; text-transform: uppercase;
            letter-spacing: .06em; margin-bottom: 10px;
        }
        .ss { background: rgba(239,68,68,.12); color: #ef4444; border: 1px solid rgba(239,68,68,.25); }
        .sc { background: rgba(34,197,94,.12);  color: #22c55e; border: 1px solid rgba(34,197,94,.25); }
        .desc {
            font-size: 13px; color: var(--ts); line-height: 1.65; margin-bottom: 14px;
        }
        table { width: 100%; border-collapse: collapse; margin-bottom: 14px; }
        th {
            font-size: 10px; font-weight: 700; color: var(--tm); text-transform: uppercase;
            letter-spacing: .08em; text-align: left; padding: 6px 10px;
            border-bottom: 1px solid var(--border);
        }
        td {
            font-size: 12px; padding: 8px 10px; border-bottom: 1px solid rgba(255,255,255,.04);
            color: var(--ts); vertical-align: top;
        }
        tr:last-child td { border-bottom: none; }
        .pn { font-family: monospace; color: #a78bfa; }
        .pt { font-family: monospace; color: #f59e0b; }
        .pv { font-family: monospace; color: #7dd3fc; }
        .cl {
            font-size: 10px; font-weight: 700; color: var(--tm);
            text-transform: uppercase; letter-spacing: .08em; margin-bottom: 6px; margin-top: 14px;
        }
        code {
            display: block; background: var(--code); border: 1px solid var(--border);
            border-radius: 8px; padding: 14px 16px; font-size: 12px; color: #7dd3fc;
            font-family: 'Cascadia Code','Fira Code', monospace;
            white-space: pre; overflow-x: auto; line-height: 1.7;
        }
        .info {
            display: flex; align-items: flex-start; gap: 10px;
            padding: 12px 16px; border-radius: 8px;
            background: rgba(56,189,248,.07); border: 1px solid rgba(56,189,248,.2);
            font-size: 12px; color: #93c5fd; line-height: 1.6; margin-top: 14px;
        }
        .info i { font-size: 16px; flex-shrink: 0; color: var(--ac); }
        .warn {
            display: flex; align-items: flex-start; gap: 10px;
            padding: 12px 16px; border-radius: 8px;
            background: rgba(245,158,11,.07); border: 1px solid rgba(245,158,11,.2);
            font-size: 12px; color: #fcd34d; line-height: 1.6; margin-top: 14px;
        }
        .warn i { font-size: 16px; flex-shrink: 0; color: var(--warning); }

        /* Demo grid */
        .dgrid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 14px; }
        .dgrid3{ display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-top: 14px; }
        .dc {
            background: var(--code); border: 1px solid var(--border);
            border-radius: 10px; padding: 16px; display: flex; flex-direction: column; gap: 8px;
        }
        .dct {
            font-size: 11px; font-weight: 700; color: var(--tm);
            text-transform: uppercase; letter-spacing: .08em;
            display: flex; align-items: center; gap: 7px;
        }
        .dct i { font-size: 14px; color: var(--ac); }
        .dbtn {
            display: flex; align-items: center; justify-content: center; gap: 7px;
            padding: 8px 14px; border-radius: 8px; border: none;
            font-size: 12px; font-weight: 600; cursor: pointer;
            transition: opacity .15s; font-family: var(--font); width: 100%;
        }
        .dbtn:hover { opacity: .8; }
        .ba { background: rgba(56,189,248,.15);  color: #38bdf8; border: 1px solid rgba(56,189,248,.25); }
        .bs { background: rgba(34,197,94,.15);   color: #22c55e; border: 1px solid rgba(34,197,94,.25); }
        .bd { background: rgba(239,68,68,.15);   color: #ef4444; border: 1px solid rgba(239,68,68,.25); }
        .bw { background: rgba(245,158,11,.15);  color: #f59e0b; border: 1px solid rgba(245,158,11,.25); }
        .bp { background: rgba(168,85,247,.15);  color: #a855f7; border: 1px solid rgba(168,85,247,.25); }
        .dout {
            font-family: monospace; font-size: 11px; color: var(--tm);
            min-height: 16px; line-height: 1.7; word-break: break-all;
        }
        .dout.ok   { color: #22c55e; }
        .dout.err  { color: #ef4444; }
        .dout.warn { color: #f59e0b; }
        .dsel, .dinp {
            background: rgba(255,255,255,.04); border: 1px solid var(--border);
            border-radius: 7px; padding: 7px 10px; color: var(--tp);
            font-size: 12px; outline: none; font-family: var(--font); width: 100%;
        }

        /* Esem√©ny t√°bla */
        .evt-row td:first-child { color: #a78bfa; font-family: monospace; }
        .evt-row td:nth-child(2){ color: #7dd3fc; font-family: monospace; font-size: 11px; }

        /* Flow diagram */
        .flow {
            display: flex; flex-direction: column; gap: 0;
            background: var(--code); border: 1px solid var(--border);
            border-radius: 10px; overflow: hidden; margin-top: 14px;
        }
        .flow-step {
            display: flex; align-items: center; gap: 12px;
            padding: 11px 16px; border-bottom: 1px solid var(--border);
            font-size: 12px;
        }
        .flow-step:last-child { border-bottom: none; }
        .flow-num {
            width: 24px; height: 24px; border-radius: 50%; flex-shrink: 0;
            background: rgba(56,189,248,.1); border: 1px solid rgba(56,189,248,.2);
            display: flex; align-items: center; justify-content: center;
            font-size: 11px; font-weight: 900; color: var(--ac);
        }
        .flow-label { flex: 1; color: var(--ts); }
        .flow-label strong { color: var(--tp); }
        .flow-badge {
            font-size: 9px; font-weight: 700; padding: 2px 7px; border-radius: 4px;
            text-transform: uppercase; letter-spacing: .06em;
        }
        .fb-s { background: rgba(239,68,68,.12); color: #ef4444; }
        .fb-c { background: rgba(56,189,248,.12); color: #38bdf8; }
        .fb-d { background: rgba(34,197,94,.12);  color: #22c55e; }
    </style>
</head>
<body>

<h1>fvg-autoshop <span class="badge">v1.0.0</span></h1>
<p class="sub">
    FirstVideos Group ¬∑ Aut√≥keresked√©s rendszer ‚Äî tesztvezet√©s, r√©szletfizet√©s, j√°rm≈±nyilv√°ntart√°s.<br>
    DB t√°bl√°k:
    <code style="display:inline;font-size:12px;color:#7dd3fc">fvg_vehicles ¬∑ fvg_vehicle_instalments</code><br>
    Integr√°ci√≥k:
    <strong>fvg-banking</strong> (fizet√©s) ¬∑
    <strong>fvg-playercore</strong> (k√©szp√©nz, j√°t√©kos adatok) ¬∑
    <strong>fvg-idcard</strong> (licensz ellen≈ërz√©s) ¬∑
    <strong>fvg-notify</strong> (√©rtes√≠t√©sek) ¬∑
    <strong>fvg-database</strong> (DB m≈±veletek)
</p>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Szerver exportok</div>

    <!-- GetOwnedVehicles -->
    <div class="card">
        <div class="sig">exports['fvg-autoshop']:GetOwnedVehicles(source) ‚Üí table[]</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Visszaadja a megadott j√°t√©kos √∂sszes akt√≠v (nem eladott) j√°rm≈±v√©t.
            Tartalmazza a j√°rm≈± alapadatait, a rendsz√°mot, kateg√≥ri√°t, v√©tel√°rat, st√°tuszt,
            valamint ha van akt√≠v r√©szletfizet√©s, annak adatait is (<code>inst_status</code>, <code>monthly_amount</code> stb.).
        </div>
        <table>
            <thead><tr><th>Visszat√©r√©si mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">id</td>            <td class="pt">number</td> <td>DB bels≈ë azonos√≠t√≥</td></tr>
                <tr><td class="pn">model</td>         <td class="pt">string</td> <td>J√°rm≈± model neve (pl. <code>adder</code>)</td></tr>
                <tr><td class="pn">label</td>         <td class="pt">string</td> <td>Megjelen√≠tett j√°rm≈± neve</td></tr>
                <tr><td class="pn">plate</td>         <td class="pt">string</td> <td>Rendsz√°m (egyedi)</td></tr>
                <tr><td class="pn">category</td>      <td class="pt">string</td> <td>Kateg√≥ria (pl. <code>super</code>)</td></tr>
                <tr><td class="pn">price</td>         <td class="pt">number</td> <td>V√©tel√°r</td></tr>
                <tr><td class="pn">status</td>        <td class="pt">string</td> <td><code>garaged</code> / <code>out</code> / <code>impound</code></td></tr>
                <tr><td class="pn">inst_status</td>   <td class="pt">string?</td><td><code>active</code> ha van r√©szletfizet√©s, egy√©bk√©nt nil</td></tr>
                <tr><td class="pn">monthly_amount</td><td class="pt">number?</td><td>Havi t√∂rleszt≈ë √∂sszege (ha van r√©szlet)</td></tr>
                <tr><td class="pn">months_paid</td>   <td class="pt">number?</td><td>Eddig kifizetett h√≥napok sz√°ma</td></tr>
                <tr><td class="pn">months_total</td>  <td class="pt">number?</td><td>√ñsszes h√≥nap sz√°ma</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda</div>
        <code>-- M√°s script (pl. fvg-garage) lek√©ri a j√°t√©kos j√°rm≈±veit
local vehicles = exports['fvg-autoshop']:GetOwnedVehicles(source)
for _, veh in ipairs(vehicles) do
    print(veh.label .. ' ‚Äì ' .. veh.plate .. ' [' .. veh.status .. ']')
    if veh.inst_status == 'active' then
        print('  Akt√≠v r√©szlet: ' .. veh.monthly_amount .. ' $/h√≥')
    end
end</code>
    </div>

    <!-- GetVehicleByPlate -->
    <div class="card">
        <div class="sig">exports['fvg-autoshop']:GetVehicleByPlate(plate) ‚Üí table | nil</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Rendsz√°m alapj√°n visszakeresi a j√°rm≈±vet az adatb√°zisb√≥l.
            Tartalmazza a tulajdonos nev√©t is (<code>firstname</code>, <code>lastname</code>).
            Hasznos rend≈ërs√©gi ellen≈ërz√©sekn√©l, impound rendszerekn√©l.
        </div>
        <div class="cl">Lua p√©lda ‚Äì rend≈ërs√©gi lek√©rdez√©s</div>
        <code>-- fvg-police: rendsz√°m ellen≈ërz√©s
RegisterNetEvent('fvg-police:server:CheckPlate', function(plate)
    local src = source
    local veh = exports['fvg-autoshop']:GetVehicleByPlate(plate)
    if veh then
        local owner = veh.firstname .. ' ' .. veh.lastname
        TriggerClientEvent('fvg-police:client:PlateResult', src, {
            found  = true,
            plate  = veh.plate,
            model  = veh.label,
            owner  = owner,
            status = veh.status,
        })
    else
        TriggerClientEvent('fvg-police:client:PlateResult', src, { found = false })
    end
end)</code>
    </div>

    <!-- IsVehicleOwned -->
    <div class="card">
        <div class="sig">exports['fvg-autoshop']:IsVehicleOwned(plate) ‚Üí boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Megadja, hogy egy adott rendsz√°m√∫ j√°rm≈± regisztr√°lt-e a rendszerben (√©s nincs eladva).
            Gyors igaz/hamis ellen≈ërz√©sre tervezve ‚Äî nem k√©r le extra adatokat.
        </div>
        <div class="cl">Lua p√©lda</div>
        <code>-- fvg-impound: ellen≈ërzi, hogy foglalhat√≥-e a j√°rm≈±
local plate = GetVehicleNumberPlateText(vehicle)
if exports['fvg-autoshop']:IsVehicleOwned(plate) then
    -- regisztr√°lt j√°rm≈±, √©rtes√≠ts√ºk a tulajdonost
else
    -- ismeretlen rendsz√°m, azonnali bont√≥
end</code>
    </div>

    <!-- BuyVehicle -->
    <div class="card">
        <div class="sig">exports['fvg-autoshop']:BuyVehicle(source, model, dealershipId, paymentMethod, instalmentOption?) ‚Üí boolean, table|string</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Teljes v√°s√°rl√°si logik√°t futtat le: licensz-ellen≈ërz√©s, √°r-sz√°m√≠t√°s (kedvezm√©nnyel),
            fizet√©s levon√°s (<code>bank</code> / <code>cash</code>), DB ment√©s, cache friss√≠t√©s,
            esem√©ny triggerel√©s. R√©szletfizet√©sn√©l automatikusan l√©trehozza a t√∂rleszt√©si tervet.
        </div>
        <table>
            <thead><tr><th>Param√©ter</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">source</td>          <td class="pt">number</td>  <td>J√°t√©kos szerver ID</td></tr>
                <tr><td class="pn">model</td>            <td class="pt">string</td>  <td>J√°rm≈± model neve</td></tr>
                <tr><td class="pn">dealershipId</td>     <td class="pt">string</td>  <td>Keresked≈ë ID (pl. <code>'pdm'</code>)</td></tr>
                <tr><td class="pn">paymentMethod</td>    <td class="pt">string</td>  <td><code>'cash'</code> vagy <code>'bank'</code></td></tr>
                <tr><td class="pn">instalmentOption</td> <td class="pt">number?</td> <td>1‚Äì3 (Config.InstalmentOptions index), nil = teljes fizet√©s</td></tr>
            </tbody>
        </table>
        <table>
            <thead><tr><th>Visszat√©r√©s (sikeres)</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">plate</td>        <td class="pt">string</td> <td>Gener√°lt rendsz√°m</td></tr>
                <tr><td class="pn">vehId</td>        <td class="pt">number</td> <td>DB sor azonos√≠t√≥ja</td></tr>
                <tr><td class="pn">monthly</td>      <td class="pt">number?</td><td>Havi t√∂rleszt≈ë (csak r√©szletn√©l)</td></tr>
                <tr><td class="pn">months</td>       <td class="pt">number?</td><td>H√≥napok sz√°ma (csak r√©szletn√©l)</td></tr>
                <tr><td class="pn">downPayment</td>  <td class="pt">number?</td><td>Foglal√≥n √∂sszege (csak r√©szletn√©l)</td></tr>
            </tbody>
        </table>
        <table>
            <thead><tr><th>Hiba k√≥d</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">insufficient_funds</td>  <td>Nincs el√©g egyenleg</td></tr>
                <tr><td class="pn">invalid_vehicle</td>      <td>Ismeretlen model</td></tr>
                <tr><td class="pn">invalid_dealer</td>       <td>Ismeretlen keresked≈ë ID</td></tr>
                <tr><td class="pn">not_available_here</td>   <td>A j√°rm≈± nem kaphat√≥ ebben a szalonban</td></tr>
                <tr><td class="pn">invalid_instalment</td>   <td>Rossz r√©szletfizet√©si opci√≥ index</td></tr>
                <tr><td class="pn">player_not_found</td>     <td>J√°t√©kos nem t√∂lt√∂tt be</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì k√ºls≈ë script v√°s√°rl√°st ind√≠t (pl. jutalom)</div>
        <code>-- J√°t√©kos egy k√ºldet√©s jutalmak√©nt kap egy j√°rm≈±vet
AddEventHandler('fvg-missions:server:RewardVehicle', function(src, model)
    local ok, result = exports['fvg-autoshop']:BuyVehicle(
        src,
        model,
        'pdm',     -- keresked≈ë neve (csak logol√°shoz)
        'bank',    -- fizet√©si m√≥d
        nil        -- teljes fizet√©s (de az √°r 0 lenne, mivel a p√©nzt el≈ëre adtuk)
    )
    if ok then
        print('[Jutalom] Rendsz√°m kiosztva: ' .. result.plate)
    end
end)</code>
    </div>

    <!-- SellVehicle -->
    <div class="card">
        <div class="sig">exports['fvg-autoshop']:SellVehicle(source, plate) ‚Üí boolean, number|string</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Eladja a j√°t√©kos j√°rm≈±v√©t a visszav√°lt√°si √°ron (<code>Config.SellBackPercent</code> √ó v√©tel√°r).
            Az √∂sszeget automatikusan a banksz√°ml√°ra j√≥v√°√≠rja (<code>fvg-banking</code>).
            Akt√≠v r√©szlettel rendelkez≈ë j√°rm≈± nem adhat√≥ el.
        </div>
        <table>
            <thead><tr><th>Hiba k√≥d</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">not_found</td>              <td>A j√°rm≈± nem l√©tezik</td></tr>
                <tr><td class="pn">not_owned</td>              <td>Nem a j√°t√©kos j√°rm≈±ve</td></tr>
                <tr><td class="pn">vehicle_in_use</td>         <td>A j√°rm≈± √©pp ki van v√©ve (<code>status = 'out'</code>)</td></tr>
                <tr><td class="pn">has_active_instalment</td>  <td>Akt√≠v r√©szletfizet√©s blokkol</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda</div>
        <code>-- Admin parancs: er≈ëltetett elad√°s (pl. impound t√∂rl√©s ut√°n)
RegisterCommand('forcesell', function(src, args)
    local plate = args[1]
    if not plate then return end
    local ok, result = exports['fvg-autoshop']:SellVehicle(src, plate)
    if ok then
        print('Eladva: ' .. plate .. ' | Visszakapott: $' .. result)
    else
        print('Hiba: ' .. result)
    end
end, true)</code>
    </div>

    <!-- GetInstalments -->
    <div class="card">
        <div class="sig">exports['fvg-autoshop']:GetInstalments(source) ‚Üí table[]</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Visszaadja a j√°t√©kos √∂sszes akt√≠v r√©szletfizet√©si terv√©t az √©rintett j√°rm≈± adataival egy√ºtt.
            A visszaadott t√∂mbben minden sor tartalmaz egy <code>next_due</code> d√°tumot,
            amellyel automatikus eml√©keztet≈ë rendszer √©p√≠thet≈ë.
        </div>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">vehicle_id</td>     <td class="pt">number</td> <td>√ârintett j√°rm≈± DB ID-ja</td></tr>
                <tr><td class="pn">label</td>          <td class="pt">string</td> <td>J√°rm≈± neve</td></tr>
                <tr><td class="pn">plate</td>          <td class="pt">string</td> <td>Rendsz√°m</td></tr>
                <tr><td class="pn">total_amount</td>   <td class="pt">number</td> <td>Teljes visszafizetend≈ë √∂sszeg</td></tr>
                <tr><td class="pn">paid_amount</td>    <td class="pt">number</td> <td>Eddig kifizetett √∂sszeg</td></tr>
                <tr><td class="pn">monthly_amount</td> <td class="pt">number</td> <td>Havi t√∂rleszt≈ë</td></tr>
                <tr><td class="pn">months_total</td>   <td class="pt">number</td> <td>√ñsszes h√≥nap</td></tr>
                <tr><td class="pn">months_paid</td>    <td class="pt">number</td> <td>Kifizetett h√≥napok</td></tr>
                <tr><td class="pn">interest_rate</td>  <td class="pt">number</td> <td>Kamatl√°b (pl. 0.05 = 5%)</td></tr>
                <tr><td class="pn">next_due</td>       <td class="pt">string</td> <td>K√∂vetkez≈ë esed√©kes d√°tum (YYYY-MM-DD)</td></tr>
                <tr><td class="pn">status</td>         <td class="pt">string</td> <td><code>active</code> / <code>paid</code> / <code>defaulted</code></td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì automatikus eml√©keztet≈ë</div>
        <code>-- Bejelentkez√©skor eml√©keztet≈ë, ha holnap esed√©kes a r√©szlet
AddEventHandler('fvg-playercore:server:PlayerLoaded', function(src, player)
    Wait(3000)
    local instalments = exports['fvg-autoshop']:GetInstalments(src)
    for _, inst in ipairs(instalments) do
        -- next_due form√°tum: YYYY-MM-DD
        local today    = os.date('%Y-%m-%d')
        local tomorrow = os.date('%Y-%m-%d', os.time() + 86400)
        if inst.next_due == today or inst.next_due == tomorrow then
            TriggerClientEvent('fvg-notify:client:Notify', src, {
                type    = 'warning',
                title   = 'üí≥ R√©szlet esed√©kes',
                message = inst.label .. ' ‚Äì ' .. inst.monthly_amount .. '$ esed√©kes: ' .. inst.next_due,
                duration= 8000,
            })
        end
    end
end)</code>
    </div>

    <!-- PayInstalment -->
    <div class="card">
        <div class="sig">exports['fvg-autoshop']:PayInstalment(source, vehicleId, paymentMethod) ‚Üí boolean, table|string</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Befizet egy havi t√∂rleszt≈ër√©szletet a megadott j√°rm≈± akt√≠v r√©szletfizet√©si terv√©re.
            Ha az utols√≥ h√≥napot fizeti be, a st√°tusz automatikusan <code>'paid'</code>-re v√°lt.
            Az esem√©ny <code>fvg-autoshop:server:InstalmentPaid</code>-et triggerel.
        </div>
        <table>
            <thead><tr><th>Visszat√©r√©s (sikeres)</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">monthsPaid</td><td class="pt">number</td>  <td>Eddig kifizetett h√≥napok (a mostani ut√°n)</td></tr>
                <tr><td class="pn">total</td>     <td class="pt">number</td>  <td>√ñsszes h√≥nap</td></tr>
                <tr><td class="pn">done</td>      <td class="pt">boolean</td> <td>true ha teljesen kifizetve</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì automatikus havi levon√°s (cron-szer≈±)</div>
        <code>-- Automatikus r√©szlet levon√°s minden h√≥napban (k√ºls≈ë scheduler-rel)
AddEventHandler('fvg-scheduler:server:MonthlyTick', function()
    local players = exports['fvg-playercore']:GetOnlinePlayers()
    for _, src in ipairs(players) do
        local instalments = exports['fvg-autoshop']:GetInstalments(src)
        for _, inst in ipairs(instalments) do
            if inst.next_due <= os.date('%Y-%m-%d') then
                local ok, result = exports['fvg-autoshop']:PayInstalment(src, inst.vehicle_id, 'bank')
                if not ok and result == 'insufficient_funds' then
                    -- √ârtes√≠t√©s + esetleg defaulted st√°tusz
                    TriggerClientEvent('fvg-notify:client:Notify', src, {
                        type='error', title='‚ùå R√©szlet nem fizethet≈ë',
                        message='Nincs el√©g bankegyenleg a t√∂rleszt≈ëh√∂z!'
                    })
                end
            end
        end
    end
end)</code>
    </div>

    <!-- GetAllDealerships -->
    <div class="card">
        <div class="sig">exports['fvg-autoshop']:GetAllDealerships() ‚Üí table[]</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Visszaadja a <code>Config.Dealerships</code> t√°bla √∂sszes keresked≈ëj√©t.
            Hasznos dinamikus blip-gener√°l√°shoz m√°s scriptekn√©l, vagy keresked≈ë list√°z√°shoz.
        </div>
        <div class="cl">Lua p√©lda</div>
        <code>-- fvg-map: dinamikusan t√∂lti be a keresked≈ëk blipjeit
local dealers = exports['fvg-autoshop']:GetAllDealerships()
for _, d in ipairs(dealers) do
    exports['fvg-map']:AddPOI({
        label  = d.label,
        coords = d.coords,
        icon   = 'car',
        color  = '#38bdf8',
    })
end</code>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Kliens exportok</div>

    <div class="card">
        <div class="sig">exports['fvg-autoshop']:OpenDealership(dealershipId) ‚Üí void</div>
        <span class="side sc">Client</span>
        <div class="desc">
            Programatikusan megnyit egy keresked≈ëi panelt a megadott keresked≈ë ID alapj√°n.
            Ugyanolyan ellen≈ërz√©sek futnak le, mintha a j√°t√©kos odament volna (licensz, stb.).
            Hasznos NPC p√°rbesz√©db≈ël vagy egy√©b UI-b√≥l val√≥ megnyit√°shoz.
        </div>
        <div class="cl">Lua p√©lda ‚Äì NPC p√°rbesz√©d alap√∫ megnyit√°s</div>
        <code>-- fvg-dialogue: NPC ‚ÄûMutasd az aut√≥kat" opci√≥ kiv√°laszt√°sakor
RegisterNetEvent('fvg-dialogue:client:OpenDealer', function(dealerId)
    if not exports['fvg-autoshop']:IsTestDriving() then
        exports['fvg-autoshop']:OpenDealership(dealerId)
    end
end)</code>
    </div>

    <div class="card">
        <div class="sig">exports['fvg-autoshop']:GetLocalOwnedVehicles() ‚Üí table[]</div>
        <span class="side sc">Client</span>
        <div class="desc">
            Visszaadja a kliens-oldali cache-ben t√°rolt saj√°t j√°rm≈±vek list√°j√°t ‚Äî
            ugyanaz az adat, amit a panel legut√≥bbi megnyit√°sakor a szerver k√ºld√∂tt.
            Nem ind√≠t szerver k√©r√©st, azonnali eredm√©nyt ad.
        </div>
        <div class="cl">Lua p√©lda</div>
        <code>-- fvg-garage: kliens oldalon ellen≈ërzi, hogy van-e saj√°t j√°rm≈±
local vehicles = exports['fvg-autoshop']:GetLocalOwnedVehicles()
if #vehicles == 0 then
    exports['fvg-notify']:Notify({
        type='info', message='Nincs saj√°t j√°rm≈±ved. L√°togass el egy keresked≈ëbe!'
    })
    return
end</code>
    </div>

    <div class="card">
        <div class="sig">exports['fvg-autoshop']:IsTestDriving() ‚Üí boolean</div>
        <span class="side sc">Client</span>
        <div class="desc">
            Visszaadja, hogy a j√°t√©kos jelenleg tesztvezet√©st v√©gez-e.
            M√°s scriptek (pl. <code>fvg-police</code>, <code>fvg-garage</code>) haszn√°lhatj√°k
            arra, hogy tesztvezet√©s k√∂zben bizonyos funkci√≥kat letiltsanak.
        </div>
        <div class="cl">Lua p√©lda</div>
        <code>-- Megakad√°lyozza, hogy tesztvezet√©s k√∂zben lehessen gar√°zst nyitni
RegisterCommand('garage', function()
    if exports['fvg-autoshop']:IsTestDriving() then
        exports['fvg-notify']:Notify({
            type='warning', message='Tesztvezet√©s k√∂zben a gar√°zs nem √©rhet≈ë el.'
        })
        return
    end
    -- gar√°zs megnyit√°sa...
end, false)</code>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Szerver esem√©ny lista</div>
    <div class="card">
        <table>
            <thead>
                <tr>
                    <th>Esem√©ny neve</th>
                    <th>Param√©terek</th>
                    <th>Mikor triggerel</th>
                </tr>
            </thead>
            <tbody class="evt-row">
                <tr class="evt-row">
                    <td>fvg-autoshop:server:VehiclePurchased</td>
                    <td>src, model, plate, price, method</td>
                    <td>Sikeres v√°s√°rl√°s ut√°n (teljes √©s r√©szlet egyar√°nt)</td>
                </tr>
                <tr class="evt-row">
                    <td>fvg-autoshop:server:VehicleSold</td>
                    <td>src, plate, sellPrice</td>
                    <td>J√°rm≈± visszav√°lt√°sakor</td>
                </tr>
                <tr class="evt-row">
                    <td>fvg-autoshop:server:InstalmentPaid</td>
                    <td>src, vehicleId, monthsPaid, totalMonths, done</td>
                    <td>R√©szlet t√∂rleszt√©sekor (minden alkalommal)</td>
                </tr>
                <tr class="evt-row">
                    <td>fvg-autoshop:server:TestDriveCompleted</td>
                    <td>src, model, returned</td>
                    <td>Tesztvezet√©s befejezt√©vel (<code>returned</code>: true = manu√°lis, false = lej√°rt)</td>
                </tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì statisztik√°k logol√°sa</div>
        <code>-- Minden v√°s√°rl√°st Discord webhook-ra k√ºld√ºnk
AddEventHandler('fvg-autoshop:server:VehiclePurchased', function(src, model, plate, price, method)
    local player = exports['fvg-playercore']:GetPlayer(src)
    if not player then return end

    local msg = string.format(
        '**√öj v√°s√°rl√°s** | J√°t√©kos: %s %s | J√°rm≈±: %s | Rendsz√°m: %s | √År: $%d | Fizet√©s: %s',
        player.firstname, player.lastname, model, plate, price, method
    )
    exports['fvg-discord']:SendWebhook('vehicle_sales', msg)
end)

-- R√©szlet kifizet√©s √©rtes√≠t√©s
AddEventHandler('fvg-autoshop:server:InstalmentPaid', function(src, vehId, paid, total, done)
    if done then
        -- J√°t√©kos teljesen kifizette a r√©szletet
        exports['fvg-discord']:SendWebhook('instalments',
            'R√©szletfizet√©s teljes√≠tve! J√°t√©kos: ' .. src .. ' | J√°rm≈± ID: ' .. vehId)
    end
end)</code>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">V√°s√°rl√°si folyamat (flow)</div>
    <div class="card">
        <div class="desc">Egy v√°s√°rl√°si esem√©ny l√©p√©seinek sorrendje szerver oldalon:</div>
        <div class="flow">
            <div class="flow-step">
                <div class="flow-num">1</div>
                <div class="flow-label"><strong>Kliens:</strong> NUI <code>buyVehicle</code> callback ‚Üí <code>fvg-autoshop:server:BuyVehicle</code> event</div>
                <span class="flow-badge fb-c">Client</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">2</div>
                <div class="flow-label"><strong>Szerver:</strong> J√°rm≈± & keresked≈ë valid√°l√°s, licensz ellen≈ërz√©s (<code>fvg-idcard</code>)</div>
                <span class="flow-badge fb-s">Server</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">3</div>
                <div class="flow-label"><strong>Szerver:</strong> √År sz√°m√≠t√°s + kedvezm√©ny alkalmaz√°sa</div>
                <span class="flow-badge fb-s">Server</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">4a</div>
                <div class="flow-label"><strong>Teljes fizet√©s:</strong> <code>fvg-banking:RemoveBalance</code> vagy <code>fvg-playercore:RemoveCash</code></div>
                <span class="flow-badge fb-s">Server</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">4b</div>
                <div class="flow-label"><strong>R√©szlet:</strong> Foglal√≥n levon√°s + <code>fvg_vehicle_instalments</code> rekord l√©trehoz√°s</div>
                <span class="flow-badge fb-s">Server</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">5</div>
                <div class="flow-label"><strong>Szerver:</strong> Rendsz√°m gener√°l√°s (<code>GenPlate</code>) + <code>fvg_vehicles</code> DB ment√©s</div>
                <span class="flow-badge fb-d">DB</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">6</div>
                <div class="flow-label"><strong>Szerver:</strong> Cache friss√≠t√©s + <code>VehiclePurchased</code> esem√©ny + kliens √©rtes√≠t√©s</div>
                <span class="flow-badge fb-s">Server</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">7</div>
                <div class="flow-label"><strong>Kliens:</strong> <code>PurchaseSuccess</code> ‚Üí panel bez√°r√°s + gar√°zs √©rtes√≠t√©s</div>
                <span class="flow-badge fb-c">Client</span>
            </div>
        </div>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Interakt√≠v export demo</div>
    <div class="card">
        <div class="dgrid">

            <!-- GetOwnedVehicles demo -->
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-garage"></i>GetOwnedVehicles / IsVehicleOwned</div>
                <input class="dinp" id="d-src"   type="number" placeholder="source (pl. 1)" value="1"/>
                <input class="dinp" id="d-plate" type="text"   placeholder="Rendsz√°m (pl. AB-123-CD)" value="AB-123-CD"/>
                <button class="dbtn ba" onclick="demoGetVehicles()">
                    <i class="hgi-stroke hgi-garage"></i>GetOwnedVehicles
                </button>
                <button class="dbtn bs" onclick="demoIsOwned()">
                    <i class="hgi-stroke hgi-search-02"></i>IsVehicleOwned
                </button>
                <div class="dout" id="d-veh-out">‚Äî</div>
            </div>

            <!-- GetInstalments demo -->
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-credit-card"></i>GetInstalments / PayInstalment</div>
                <input class="dinp" id="d-inst-src"   type="number" placeholder="source (pl. 1)" value="1"/>
                <input class="dinp" id="d-inst-vehid" type="number" placeholder="vehicle_id (pl. 3)" value="3"/>
                <select class="dsel" id="d-inst-pay">
                    <option value="cash">K√©szp√©nz</option>
                    <option value="bank" selected>Bank</option>
                </select>
                <button class="dbtn bp" onclick="demoGetInstalments()">
                    <i class="hgi-stroke hgi-credit-card"></i>GetInstalments
                </button>
                <button class="dbtn bs" onclick="demoPayInstalment()">
                    <i class="hgi-stroke hgi-checkmark-02"></i>PayInstalment
                </button>
                <div class="dout" id="d-inst-out">‚Äî</div>
            </div>
        </div>

        <div class="dgrid" style="margin-top:12px">

            <!-- BuyVehicle demo -->
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-car-01"></i>BuyVehicle</div>
                <select class="dsel" id="d-buy-model">
                    <option value="adder">adder ‚Äì Adder ($1,000,000)</option>
                    <option value="zentorno">zentorno ‚Äì Zentorno ($725,000)</option>
                    <option value="jester">jester ‚Äì Jester Classic ($125,000)</option>
                    <option value="blista" selected>blista ‚Äì Blista ($16,000)</option>
                    <option value="bati801">bati801 ‚Äì Bati 801 ($15,000)</option>
                </select>
                <select class="dsel" id="d-buy-dealer">
                    <option value="pdm">pdm ‚Äì Premium Deluxe Motorsport</option>
                    <option value="luxury">luxury ‚Äì Luxury Autos</option>
                    <option value="bikes">bikes ‚Äì Motorkeresked√©s</option>
                    <option value="used" selected>used ‚Äì Haszn√°ltaut√≥ Piac</option>
                </select>
                <select class="dsel" id="d-buy-pay">
                    <option value="cash">K√©szp√©nz</option>
                    <option value="bank" selected>Bank</option>
                </select>
                <select class="dsel" id="d-buy-inst">
                    <option value="">Teljes fizet√©s</option>
                    <option value="1">3 h√≥nap ‚Äì 0% kamat</option>
                    <option value="2">6 h√≥nap ‚Äì 5% kamat</option>
                    <option value="3">12 h√≥nap ‚Äì 10% kamat</option>
                </select>
                <button class="dbtn bs" onclick="demoBuyVehicle()">
                    <i class="hgi-stroke hgi-shopping-cart-02"></i>BuyVehicle
                </button>
                <div class="dout" id="d-buy-out">‚Äî</div>
            </div>

            <!-- SellVehicle + GetAllDealerships demo -->
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-money-send-02"></i>SellVehicle / GetAllDealerships</div>
                <input class="dinp" id="d-sell-plate" type="text" placeholder="Rendsz√°m elad√°shoz" value="AB-123-CD"/>
                <button class="dbtn bw" onclick="demoSellVehicle()">
                    <i class="hgi-stroke hgi-money-send-02"></i>SellVehicle
                </button>
                <button class="dbtn ba" onclick="demoGetDealerships()">
                    <i class="hgi-stroke hgi-map-01"></i>GetAllDealerships
                </button>
                <button class="dbtn bd" onclick="demoGetPlate()">
                    <i class="hgi-stroke hgi-search-02"></i>GetVehicleByPlate
                </button>
                <div class="dout" id="d-sell-out">‚Äî</div>
            </div>
        </div>

        <div class="info" style="margin-top:14px">
            <i class="hgi-stroke hgi-information-circle"></i>
            <span>
                Ez egy interakt√≠v szimul√°ci√≥ ‚Äî val√≥di FiveM szerver n√©lk√ºl is bemutatja az exportok
                visszat√©r√©si √©rt√©keit √©s a lehets√©ges hibak√≥dokat. √âles k√∂rnyezetben a Lua exportokat
                kell haszn√°lni a fenti p√©ld√°k szerint.
            </span>
        </div>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Kompatibilit√°s m√°s fvg scriptekkel</div>
    <div class="card">
        <table>
            <thead><tr><th>Script</th><th>Kapcsolat t√≠pusa</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr>
                    <td class="pn">fvg-banking</td>
                    <td class="pt">Akt√≠v integr√°ci√≥</td>
                    <td>Fizet√©sekn√©l <code>RemoveBalance</code>, elad√°sn√°l <code>AddBalance</code>, tranzakci√≥napl√≥hoz <code>CreateTransaction</code></td>
                </tr>
                <tr>
                    <td class="pn">fvg-playercore</td>
                    <td class="pt">Akt√≠v integr√°ci√≥</td>
                    <td>K√©szp√©nz levon√°shoz <code>RemoveCash</code>, j√°t√©kos adatok lek√©r√©s√©hez <code>GetPlayer</code>, bet√∂lt√©si esem√©nyekhez</td>
                </tr>
                <tr>
                    <td class="pn">fvg-idcard</td>
                    <td class="pt">Akt√≠v integr√°ci√≥</td>
                    <td>Keresked≈ëbe l√©p√©sn√©l <code>HasLicense</code> ellen≈ërz√©s (pl. <code>driving</code>, <code>motorcycle</code>)</td>
                </tr>
                <tr>
                    <td class="pn">fvg-notify</td>
                    <td class="pt">Akt√≠v integr√°ci√≥</td>
                    <td>Minden visszajelz√©s (<code>fvg-notify:client:Notify</code> event) ezen kereszt√ºl megy</td>
                </tr>
                <tr>
                    <td class="pn">fvg-database</td>
                    <td class="pt">Akt√≠v integr√°ci√≥</td>
                    <td>Migr√°ci√≥, Query, Insert, Execute m≈±veletek mind ezen exporton kereszt√ºl</td>
                </tr>
                <tr>
                    <td class="pn">fvg-garage</td>
                    <td class="pt">Export fogyaszt√≥</td>
                    <td>A gar√°zs <code>GetOwnedVehicles</code>-t haszn√°l a j√°rm≈±vek list√°z√°s√°hoz</td>
                </tr>
                <tr>
                    <td class="pn">fvg-police</td>
                    <td class="pt">Export fogyaszt√≥</td>
                    <td>Rend≈ër√∂k <code>GetVehicleByPlate</code> √©s <code>IsVehicleOwned</code> exportokat haszn√°lnak</td>
                </tr>
                <tr>
                    <td class="pn">fvg-shops</td>
                    <td class="pt">F√ºggetlen</td>
                    <td>Nincs k√∂zvetlen kapcsolat, de mindk√©t script <code>fvg-banking</code>-ot haszn√°l</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>

<script>
    // ‚îÄ‚îÄ Szimul√°lt adatok ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const mockVehicles = [
        { id:1, model:'blista', label:'Blista', plate:'AB-123-CD', category:'compact', price:16000, status:'garaged', inst_status:null },
        { id:2, model:'adder',  label:'Adder',  plate:'XY-999-ZZ', category:'super',   price:1000000, status:'garaged', inst_status:'active', monthly_amount:18000, months_paid:2, months_total:12 },
    ];
    const mockInstalments = [
        { vehicle_id:2, label:'Adder', plate:'XY-999-ZZ', total_amount:990000, paid_amount:36000, monthly_amount:18000, months_total:12, months_paid:2, interest_rate:0.10, next_due:'2026-03-21', status:'active' }
    ];
    const mockDealerships = [
        { id:'pdm',    label:'Premium Deluxe Motorsport', type:'car' },
        { id:'luxury', label:'Luxury Autos',              type:'car' },
        { id:'bikes',  label:'Motorkeresked√©s',           type:'motorcycle' },
        { id:'used',   label:'Haszn√°ltaut√≥ Piac',         type:'car' },
    ];
    const mockPrices = { adder:1000000, zentorno:725000, jester:125000, blista:16000, bati801:15000 };

    const fmt = (n) => '$' + Number(n).toLocaleString('hu-HU');

    function setOut(id, msg, cls = '') {
        const el = document.getElementById(id);
        el.textContent = msg;
        el.className = 'dout ' + cls;
    }

    function demoGetVehicles() {
        const src = document.getElementById('d-src').value;
        const result = mockVehicles.map(v =>
            `${v.label} | ${v.plate} | ${v.status}${v.inst_status === 'active' ? ' [r√©szlet akt√≠v]' : ''}`
        ).join('\n');
        setOut('d-veh-out', `GetOwnedVehicles(${src}) ‚Üí\n${result}`, 'ok');
    }

    function demoIsOwned() {
        const plate = document.getElementById('d-plate').value.toUpperCase();
        const found = mockVehicles.some(v => v.plate === plate);
        setOut('d-veh-out',
            `IsVehicleOwned("${plate}") ‚Üí ${found}`,
            found ? 'ok' : 'warn'
        );
    }

    function demoGetInstalments() {
        const src = document.getElementById('d-inst-src').value;
        if (!mockInstalments.length) {
            setOut('d-inst-out', `GetInstalments(${src}) ‚Üí [] (√ºres)`, 'warn'); return;
        }
        const i = mockInstalments[0];
        setOut('d-inst-out',
            `GetInstalments(${src}) ‚Üí\n${i.label} | ${i.plate}\n` +
            `Fizetve: ${i.months_paid}/${i.months_total} h√≥ | Havi: ${fmt(i.monthly_amount)}\n` +
            `Marad√©k: ${fmt(i.total_amount - i.paid_amount)} | Esed√©kes: ${i.next_due}`,
            'ok'
        );
    }

    function demoPayInstalment() {
        const src   = document.getElementById('d-inst-src').value;
        const vehId = document.getElementById('d-inst-vehid').value;
        const pay   = document.getElementById('d-inst-pay').value;
        const inst  = mockInstalments.find(i => String(i.vehicle_id) === String(vehId));
        if (!inst) {
            setOut('d-inst-out', `PayInstalment(${src}, ${vehId}) ‚Üí false, "not_found"`, 'err'); return;
        }
        const newPaid = inst.months_paid + 1;
        const done    = newPaid >= inst.months_total;
        setOut('d-inst-out',
            `PayInstalment(${src}, ${vehId}, "${pay}") ‚Üí\ntrue, { monthsPaid:${newPaid}, total:${inst.months_total}, done:${done} }\nLevonva: ${fmt(inst.monthly_amount)} (${pay})`,
            'ok'
        );
    }

    function demoBuyVehicle() {
        const model  = document.getElementById('d-buy-model').value;
        const dealer = document.getElementById('d-buy-dealer').value;
        const pay    = document.getElementById('d-buy-pay').value;
        const inst   = document.getElementById('d-buy-inst').value;

        const prices = { pdm:1.0, luxury:1.0, bikes:1.0, used:0.85 };
        const basePrice = mockPrices[model] || 0;
        const price     = Math.floor(basePrice * (prices[dealer] || 1));
        const plate     = generatePlate();

        if (inst) {
            const rates   = [0, 0.0, 0.05, 0.10];
            const months  = [0, 3, 6, 12];
            const idx     = parseInt(inst);
            const dp      = Math.floor(price * 0.20);
            const rem     = price - dp;
            const total   = Math.floor(rem * (1 + rates[idx]));
            const monthly = Math.ceil(total / months[idx]);
            setOut('d-buy-out',
                `BuyVehicle(src, "${model}", "${dealer}", "${pay}", ${inst}) ‚Üí\ntrue, {\n  plate: "${plate}",\n  vehId: ${Math.floor(Math.random()*900)+100},\n  downPayment: ${fmt(dp)},\n  monthly: ${fmt(monthly)},\n  months: ${months[idx]}\n}`,
                'ok'
            );
        } else {
            setOut('d-buy-out',
                `BuyVehicle(src, "${model}", "${dealer}", "${pay}", nil) ‚Üí\ntrue, {\n  plate: "${plate}",\n  vehId: ${Math.floor(Math.random()*900)+100}\n}\nLevonva: ${fmt(price)} (${pay})`,
                'ok'
            );
        }
    }

    function demoSellVehicle() {
        const plate = document.getElementById('d-sell-plate').value.toUpperCase();
        const found = mockVehicles.find(v => v.plate === plate);
        if (!found) {
            setOut('d-sell-out', `SellVehicle(src, "${plate}") ‚Üí false, "not_found"`, 'err'); return;
        }
        if (found.inst_status === 'active') {
            setOut('d-sell-out', `SellVehicle(src, "${plate}") ‚Üí false, "has_active_instalment"`, 'err'); return;
        }
        const sellPrice = Math.floor(found.price * 0.65);
        setOut('d-sell-out',
            `SellVehicle(src, "${plate}") ‚Üí\ntrue, ${fmt(sellPrice)}\nJ√≥v√°√≠rva: banksz√°ml√°ra`,
            'ok'
        );
    }

    function demoGetDealerships() {
        const result = mockDealerships.map(d => `${d.id}: ${d.label} (${d.type})`).join('\n');
        setOut('d-sell-out', `GetAllDealerships() ‚Üí\n${result}`, 'ok');
    }

    function demoGetPlate() {
        const plate = document.getElementById('d-sell-plate').value.toUpperCase();
        const found = mockVehicles.find(v => v.plate === plate);
        if (!found) {
            setOut('d-sell-out', `GetVehicleByPlate("${plate}") ‚Üí nil`, 'warn'); return;
        }
        setOut('d-sell-out',
            `GetVehicleByPlate("${plate}") ‚Üí\n{ model:"${found.model}", label:"${found.label}",\n  plate:"${found.plate}", status:"${found.status}",\n  firstname:"Teszt", lastname:"J√°t√©kos" }`,
            'ok'
        );
    }

    function generatePlate() {
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const r = () => chars[Math.floor(Math.random() * chars.length)];
        const n = () => Math.floor(Math.random() * 10);
        return `${r()}${r()}-${n()}${n()}${n()}-${r()}${r()}`;
    }
</script>

</body>
</html>