<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8"/>
    <title>fvg-police ‚Äì Export dokument√°ci√≥</title>
    <link rel="stylesheet" href="https://use.hugeicons.com/font/icons.css"/>
    <style>
        :root {
            --bg:#0a0c12; --card:#161b24; --code:#0f172a; --border:#1e293b;
            --tp:#f1f5f9; --ts:#94a3b8; --tm:#475569; --ac:#38bdf8;
            --success:#22c55e; --warning:#f59e0b; --danger:#ef4444; --purple:#a855f7;
            --font:'Segoe UI',system-ui,sans-serif;
        }
        *, *::before, *::after { box-sizing:border-box; margin:0; padding:0; }
        body {
            background:var(--bg); color:var(--tp); font-family:var(--font);
            padding:48px 28px 120px; max-width:1040px; margin:0 auto;
        }
        h1   { font-size:28px; font-weight:800; margin-bottom:6px; }
        .sub { color:var(--tm); font-size:14px; line-height:1.7; margin-bottom:48px; }
        .badge {
            display:inline-block; background:rgba(56,189,248,.12); color:var(--ac);
            font-size:11px; font-weight:700; padding:2px 10px; border-radius:20px;
            letter-spacing:.05em; margin-left:10px; border:1px solid rgba(56,189,248,.25);
        }
        .job-badge {
            display:inline-flex; align-items:center; gap:6px;
            background:rgba(56,189,248,.08); border:1px solid rgba(56,189,248,.2);
            border-radius:8px; padding:4px 12px; font-size:12px; font-weight:700;
            color:var(--ac); margin-right:8px; margin-bottom:4px;
        }
        section { margin-bottom:44px; }
        .st {
            font-size:11px; font-weight:700; color:var(--tm); text-transform:uppercase;
            letter-spacing:.1em; border-bottom:1px solid var(--border);
            padding-bottom:10px; margin-bottom:16px;
        }
        .card {
            background:var(--card); border:1px solid var(--border);
            border-radius:10px; padding:22px 24px; margin-bottom:14px;
        }
        .sig {
            font-family:monospace; font-size:13px; font-weight:700;
            color:var(--ac); margin-bottom:6px; line-height:1.9;
        }
        .side {
            display:inline-block; font-size:10px; font-weight:700;
            padding:2px 8px; border-radius:4px; text-transform:uppercase;
            letter-spacing:.06em; margin-bottom:10px;
        }
        .ss { background:rgba(239,68,68,.12);  color:#ef4444; border:1px solid rgba(239,68,68,.25); }
        .sc { background:rgba(34,197,94,.12);  color:#22c55e; border:1px solid rgba(34,197,94,.25); }
        .sm { background:rgba(168,85,247,.12); color:#a855f7; border:1px solid rgba(168,85,247,.25); }
        .desc { font-size:13px; color:var(--ts); line-height:1.65; margin-bottom:14px; }
        table { width:100%; border-collapse:collapse; margin-bottom:14px; }
        th {
            font-size:10px; font-weight:700; color:var(--tm); text-transform:uppercase;
            letter-spacing:.08em; text-align:left; padding:6px 10px;
            border-bottom:1px solid var(--border);
        }
        td {
            font-size:12px; padding:8px 10px;
            border-bottom:1px solid rgba(255,255,255,.04);
            color:var(--ts); vertical-align:top;
        }
        tr:last-child td { border-bottom:none; }
        .pn { font-family:monospace; color:#a78bfa; }
        .pt { font-family:monospace; color:#f59e0b; }
        .cl {
            font-size:10px; font-weight:700; color:var(--tm);
            text-transform:uppercase; letter-spacing:.08em;
            margin-bottom:6px; margin-top:14px;
        }
        code {
            display:block; background:var(--code); border:1px solid var(--border);
            border-radius:8px; padding:14px 16px; font-size:12px; color:#7dd3fc;
            font-family:'Cascadia Code','Fira Code',monospace;
            white-space:pre; overflow-x:auto; line-height:1.7;
        }
        .info {
            display:flex; align-items:flex-start; gap:10px;
            padding:12px 16px; border-radius:8px;
            background:rgba(56,189,248,.07); border:1px solid rgba(56,189,248,.2);
            font-size:12px; color:#93c5fd; line-height:1.6; margin-top:14px;
        }
        .info i { font-size:16px; flex-shrink:0; color:var(--ac); }
        .warn {
            display:flex; align-items:flex-start; gap:10px;
            padding:12px 16px; border-radius:8px;
            background:rgba(245,158,11,.07); border:1px solid rgba(245,158,11,.2);
            font-size:12px; color:#fcd34d; line-height:1.6; margin-top:14px;
        }
        .warn i { font-size:16px; flex-shrink:0; color:var(--warning); }
        .danger-box {
            display:flex; align-items:flex-start; gap:10px;
            padding:12px 16px; border-radius:8px;
            background:rgba(239,68,68,.07); border:1px solid rgba(239,68,68,.2);
            font-size:12px; color:#fca5a5; line-height:1.6; margin-top:14px;
        }
        .danger-box i { font-size:16px; flex-shrink:0; color:var(--danger); }

        /* Modul blokkok */
        .mod-block {
            border:1px solid var(--border); border-radius:12px;
            overflow:hidden; margin-bottom:16px;
        }
        .mod-header {
            display:flex; align-items:center; gap:12px;
            padding:13px 18px; background:rgba(255,255,255,.025);
            border-bottom:1px solid var(--border);
        }
        .mod-header-icon {
            width:36px; height:36px; border-radius:9px; flex-shrink:0;
            background:rgba(56,189,248,.08); border:1px solid rgba(56,189,248,.15);
            display:flex; align-items:center; justify-content:center;
            font-size:17px; color:var(--ac);
        }
        .mod-header-title { font-size:14px; font-weight:800; }
        .mod-header-sub   { font-size:11px; color:var(--tm); margin-top:1px; }
        .mod-body { padding:18px 20px; }

        /* Flow */
        .flow {
            display:flex; flex-direction:column; gap:0;
            background:var(--code); border:1px solid var(--border);
            border-radius:10px; overflow:hidden; margin-top:14px;
        }
        .flow-step {
            display:flex; align-items:center; gap:12px;
            padding:11px 16px; border-bottom:1px solid var(--border);
            font-size:12px;
        }
        .flow-step:last-child { border-bottom:none; }
        .flow-num {
            width:24px; height:24px; border-radius:50%; flex-shrink:0;
            background:rgba(56,189,248,.1); border:1px solid rgba(56,189,248,.2);
            display:flex; align-items:center; justify-content:center;
            font-size:11px; font-weight:900; color:var(--ac);
        }
        .flow-label { flex:1; color:var(--ts); }
        .flow-label strong { color:var(--tp); }
        .flow-badge {
            font-size:9px; font-weight:700; padding:2px 7px; border-radius:4px;
            text-transform:uppercase; letter-spacing:.06em;
        }
        .fb-s { background:rgba(239,68,68,.12);  color:#ef4444; }
        .fb-c { background:rgba(56,189,248,.12); color:#38bdf8; }
        .fb-d { background:rgba(34,197,94,.12);  color:#22c55e; }
        .fb-m { background:rgba(168,85,247,.12); color:#a855f7; }

        /* Demo */
        .dgrid  { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:14px; }
        .dgrid3 { display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; margin-top:14px; }
        .dc {
            background:var(--code); border:1px solid var(--border);
            border-radius:10px; padding:16px; display:flex; flex-direction:column; gap:8px;
        }
        .dct {
            font-size:11px; font-weight:700; color:var(--tm);
            text-transform:uppercase; letter-spacing:.08em;
            display:flex; align-items:center; gap:7px;
        }
        .dct i { font-size:14px; color:var(--ac); }
        .dbtn {
            display:flex; align-items:center; justify-content:center; gap:7px;
            padding:8px 14px; border-radius:8px; border:none;
            font-size:12px; font-weight:600; cursor:pointer;
            transition:opacity .15s; font-family:var(--font); width:100%;
        }
        .dbtn:hover { opacity:.8; }
        .ba { background:rgba(56,189,248,.15);  color:#38bdf8;  border:1px solid rgba(56,189,248,.25); }
        .bs { background:rgba(34,197,94,.15);   color:#22c55e;  border:1px solid rgba(34,197,94,.25); }
        .bd { background:rgba(239,68,68,.15);   color:#ef4444;  border:1px solid rgba(239,68,68,.25); }
        .bw { background:rgba(245,158,11,.15);  color:#f59e0b;  border:1px solid rgba(245,158,11,.25); }
        .bp { background:rgba(168,85,247,.15);  color:#a855f7;  border:1px solid rgba(168,85,247,.25); }
        .dsel, .dinp {
            background:rgba(255,255,255,.04); border:1px solid var(--border);
            border-radius:7px; padding:7px 10px; color:var(--tp);
            font-size:12px; outline:none; font-family:var(--font); width:100%;
        }
        .dout {
            font-family:monospace; font-size:11px; color:var(--tm);
            min-height:16px; line-height:1.7; word-break:break-all;
        }
        .dout.ok   { color:#22c55e; }
        .dout.err  { color:#ef4444; }
        .dout.warn { color:#f59e0b; }

        /* Compat t√°bla */
        .compat-grid {
            display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-top:14px;
        }
        .compat-card {
            background:var(--code); border:1px solid var(--border);
            border-radius:9px; padding:13px 14px;
        }
        .cc-name  { font-family:monospace; font-size:12px; color:var(--ac); font-weight:700; margin-bottom:4px; }
        .cc-type  { font-size:10px; color:var(--tm); margin-bottom:6px; }
        .cc-desc  { font-size:11px; color:var(--ts); line-height:1.5; }

        /* Job sablon k√°rty√°k */
        .job-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; margin-top:14px; }
        .job-card {
            background:var(--code); border:1px solid var(--border);
            border-radius:10px; padding:14px 16px;
            display:flex; flex-direction:column; gap:6px;
        }
        .jc-icon { font-size:24px; margin-bottom:4px; }
        .jc-name { font-size:13px; font-weight:800; }
        .jc-sub  { font-size:11px; color:var(--tm); line-height:1.5; }

        /* Esem√©ny t√°bla */
        .evt-row td:first-child { color:#a78bfa; font-family:monospace; }
        .evt-row td:nth-child(2){ color:#7dd3fc; font-family:monospace; font-size:11px; }
    </style>
</head>
<body>

<h1>fvg-police <span class="badge">v1.0.0</span></h1>
<p class="sub">
    FirstVideos Group ¬∑ Modul√°ris Emergency Job rendszer ‚Äî rend≈ërs√©g alapimplement√°ci√≥.<br>
    Alap emergency job, amelyb≈ël m√°s munk√°k (<span class="job-badge"><i class="hgi-stroke hgi-fire-02"></i>fvg-firefighter</span>
    <span class="job-badge"><i class="hgi-stroke hgi-tree-02"></i>fvg-ranger</span>
    <span class="job-badge"><i class="hgi-stroke hgi-ambulance"></i>fvg-ems</span>) is l√©trehozhat√≥k.<br>
    DB t√°bl√°k:
    <code style="display:inline;font-size:12px;color:#7dd3fc">
        fvg_officers ¬∑ fvg_officer_logs ¬∑ fvg_fines ¬∑ fvg_prison ¬∑ fvg_mdt_notes
    </code><br>
    Integr√°ci√≥k:
    <strong>fvg-banking</strong> ¬∑
    <strong>fvg-playercore</strong> ¬∑
    <strong>fvg-inventory</strong> ¬∑
    <strong>fvg-notify</strong> ¬∑
    <strong>fvg-database</strong> ¬∑
    <strong>fvg-admin</strong> ¬∑
    <strong>fvg-idcard</strong>
</p>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Core szerver exportok</div>

    <!-- GetOfficer -->
    <div class="card">
        <div class="sig">exports['fvg-police']:GetOfficer(source) ‚Üí table | nil</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Visszaadja a megadott j√°t√©kos rend≈ër cache bejegyz√©s√©t.
            Tartalmazza a rangot, callsignt, duty st√°tuszt √©s az akt√≠v egys√©get.
            Ha a j√°t√©kos nem rend≈ër vagy nincs bet√∂ltve, <code>nil</code>-t ad vissza.
        </div>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">id</td>          <td class="pt">number</td>  <td>DB sor azonos√≠t√≥ja (<code>fvg_officers.id</code>)</td></tr>
                <tr><td class="pn">identifier</td>  <td class="pt">string</td>  <td>J√°t√©kos egyedi azonos√≠t√≥ja</td></tr>
                <tr><td class="pn">playerId</td>    <td class="pt">number</td>  <td><code>fvg_players.id</code></td></tr>
                <tr><td class="pn">firstname</td>   <td class="pt">string</td>  <td>Keresztn√©v</td></tr>
                <tr><td class="pn">lastname</td>    <td class="pt">string</td>  <td>Vezet√©kn√©v</td></tr>
                <tr><td class="pn">grade</td>       <td class="pt">number</td>  <td>Rang szint (0‚Äì5)</td></tr>
                <tr><td class="pn">rankName</td>    <td class="pt">string</td>  <td>Rang bels≈ë neve (pl. <code>sergeant</code>)</td></tr>
                <tr><td class="pn">rankLabel</td>   <td class="pt">string</td>  <td>Rang megjelen√≠t√©si neve (pl. <code>≈êrmester</code>)</td></tr>
                <tr><td class="pn">callsign</td>    <td class="pt">string?</td> <td>H√≠v√≥jel (pl. <code>A-12</code>)</td></tr>
                <tr><td class="pn">duty</td>        <td class="pt">boolean</td> <td>Jelenleg szolg√°latban van-e</td></tr>
                <tr><td class="pn">unit</td>        <td class="pt">number?</td> <td>Akt√≠v egys√©g ID, nil ha nincs egys√©gben</td></tr>
                <tr><td class="pn">hireDate</td>    <td class="pt">string</td>  <td>Felv√©tel d√°tuma (YYYY-MM-DD)</td></tr>
                <tr><td class="pn">totalSalary</td> <td class="pt">number</td>  <td>√ñsszesen kapott fizet√©s</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda</div>
        <code>-- fvg-evidence: csak duty rend≈ër veheti fel a bizony√≠t√©kot
RegisterNetEvent('fvg-evidence:server:Collect', function(itemId)
    local src = source
    local off = exports['fvg-police']:GetOfficer(src)
    if not off or not off.duty then
        TriggerClientEvent('fvg-notify:client:Notify', src, {
            type='error', message='Csak szolg√°latban l√©v≈ë rend≈ër gy≈±jthet bizony√≠t√©kot.'
        })
        return
    end
    -- Bizony√≠t√©k √∂sszegy≈±jt√©se...
    print(off.rankLabel .. ' ' .. off.lastname .. ' gy≈±jt√∂tte be: ' .. itemId)
end)</code>
    </div>

    <!-- GetAllOfficers -->
    <div class="card">
        <div class="sig">exports['fvg-police']:GetAllOfficers() ‚Üí table</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Visszaadja az √∂sszes bet√∂lt√∂tt rend≈ër cache bejegyz√©s√©t.
            A visszaadott t√°bla kulcsa a j√°t√©kos szerver ID-ja (<code>[src] = officerData</code>).
            Tartalmaz duty st√°tuszt√≥l f√ºggetlen√ºl minden rend≈ërt aki be van l√©pve.
        </div>
        <div class="cl">Lua p√©lda ‚Äì admin parancs</div>
        <code>-- Admin: √∂sszes rend≈ër list√°z√°sa
RegisterCommand('listpolice', function(src)
    if not exports['fvg-admin']:IsAdmin(src) then return end
    local officers = exports['fvg-police']:GetAllOfficers()
    local count = 0
    for s, off in pairs(officers) do
        count = count + 1
        print(string.format('[%d] %s %s ‚Äì %s ‚Äì Duty: %s',
            s, off.firstname, off.lastname,
            off.rankLabel, tostring(off.duty)))
    end
    print('√ñsszesen: ' .. count .. ' rend≈ër online')
end, true)</code>
    </div>

    <!-- GetOnDutyOfficers -->
    <div class="card">
        <div class="sig">exports['fvg-police']:GetOnDutyOfficers() ‚Üí table</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Csak a jelenleg szolg√°latban l√©v≈ë (<code>duty = true</code>) rend≈ër√∂ket adja vissza.
            M√°s scriptek (pl. <code>fvg-dispatch</code>, <code>fvg-mdt</code>) haszn√°lj√°k
            a szolg√°latos egys√©gek megjelen√≠t√©s√©hez.
        </div>
        <div class="cl">Lua p√©lda ‚Äì dispatch √©rtes√≠t√©s</div>
        <code>-- fvg-dispatch: 911-es h√≠v√°s k√ºld√©se az √∂sszes duty rend≈ërnek
RegisterNetEvent('fvg-dispatch:server:Call911', function(msg, coords)
    local officers = exports['fvg-police']:GetOnDutyOfficers()
    local count = 0
    for src, _ in pairs(officers) do
        TriggerClientEvent('fvg-notify:client:Notify', src, {
            type    = 'warning',
            title   = 'üìü 911 H√≠v√°s',
            message = msg,
            duration= 10000,
        })
        TriggerClientEvent('fvg-dispatch:client:ShowBlip', src, coords)
        count = count + 1
    end
    print(count .. ' rend≈ërnek k√ºldt√ºk ki a h√≠v√°st.')
end)</code>
    </div>

    <!-- IsOnDuty -->
    <div class="card">
        <div class="sig">exports['fvg-police']:IsOnDuty(source) ‚Üí boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Gyors ellen≈ërz√©s: a megadott j√°t√©kos jelenleg rend≈ëri szolg√°latban van-e.
            Nem k√©r le extra adatot, csak a duty flaget adja vissza.
        </div>
        <div class="cl">Lua p√©lda</div>
        <code>-- Blokkolja a b≈±ncselekm√©ny triggert ha rend≈ër van a k√∂zelben √©s duty-ban
AddEventHandler('fvg-crime:server:AttemptRobbery', function(src)
    local players = GetPlayers()
    for _, s in ipairs(players) do
        if exports['fvg-police']:IsOnDuty(tonumber(s)) then
            local ped1 = GetPlayerPed(src)
            local ped2 = GetPlayerPed(tonumber(s))
            if #(GetEntityCoords(ped1) - GetEntityCoords(ped2)) < 100.0 then
                TriggerClientEvent('fvg-notify:client:Notify', src, {
                    type='error', message='Rend≈ër a k√∂zelben! Nem ind√≠that√≥ a rabl√°s.'
                })
                return
            end
        end
    end
    -- Rabl√°s enged√©lyezve...
end)</code>
    </div>

    <!-- GetOfficerUnit -->
    <div class="card">
        <div class="sig">exports['fvg-police']:GetOfficerUnit(source) ‚Üí table | nil</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Visszaadja a j√°t√©kos akt√≠v egys√©g√©nek teljes adat√°t
            (<code>id</code>, <code>name</code>, <code>leader</code>, <code>members</code>, <code>channel</code>).
            Ha nincs egys√©gben, <code>nil</code>-t ad vissza.
        </div>
        <div class="cl">Lua p√©lda ‚Äì r√°di√≥ csatorna szinkroniz√°l√°s</div>
        <code>-- fvg-radio: automatikusan a rend≈ër egys√©g√©nek csatorn√°j√°ra √°ll√≠tja a r√°di√≥t
AddEventHandler('fvg-police:server:PlayerLoaded', function(src)
    Wait(1000)
    local unit = exports['fvg-police']:GetOfficerUnit(src)
    if unit then
        exports['fvg-radio']:SetChannel(src, unit.channel)
    end
end)</code>
    </div>

    <!-- SetOfficerRank -->
    <div class="card">
        <div class="sig">exports['fvg-police']:SetOfficerRank(source, grade) ‚Üí boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Be√°ll√≠tja a megadott rend≈ër rangj√°t a megadott grade √©rt√©kre (0‚Äì5).
            Automatikusan friss√≠ti a cache-t, az adatb√°zist, √©s √©rtes√≠ti a klienst.
            Napl√≥ bejegyz√©st is l√©trehoz a <code>fvg_officer_logs</code> t√°bl√°ban.
        </div>
        <table>
            <thead><tr><th>Param√©ter</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">source</td><td class="pt">number</td><td>J√°t√©kos szerver ID</td></tr>
                <tr><td class="pn">grade</td> <td class="pt">number</td><td>Rang szint 0‚Äì5 (Config.Ranks)</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì rangsor rendszer</div>
        <code>-- fvg-achievements: automatikus rang emel√©s teljes√≠tm√©ny alapj√°n
AddEventHandler('fvg-achievements:server:AchievementUnlocked', function(src, achievId)
    if achievId ~= 'arrests_100' then return end
    local off = exports['fvg-police']:GetOfficer(src)
    if not off then return end
    if off.grade < 5 then
        local newGrade = off.grade + 1
        exports['fvg-police']:SetOfficerRank(src, newGrade)
        exports['fvg-discord']:SendWebhook('promotions',
            off.firstname .. ' ' .. off.lastname .. ' el≈ël√©ptetve!')
    end
end)</code>
    </div>

    <!-- AddSalary -->
    <div class="card">
        <div class="sig">exports['fvg-police']:AddSalary(source, amount) ‚Üí boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Hozz√°adja a megadott √∂sszeget a rend≈ër √∂sszes√≠tett fizet√©s sz√°ml√°l√≥j√°hoz
            (<code>fvg_officers.total_salary</code>). Nem von le semmit, csak nyilv√°ntartja
            a kapott fizet√©st. A t√©nyleges kifizet√©s az automatikus salary ciklusban t√∂rt√©nik.
        </div>
        <div class="cl">Lua p√©lda ‚Äì b√≥nusz fizet√©s</div>
        <code>-- Jutalomfizet√©s kiemelked≈ë teljes√≠tm√©ny√©rt
RegisterCommand('policebonus', function(src, args)
    if not exports['fvg-admin']:IsAdmin(src) then return end
    local targetSrc = tonumber(args[1])
    local amount    = tonumber(args[2]) or 500
    if not targetSrc then return end

    exports['fvg-banking']:AddBalance(targetSrc, amount, 'checking',
        'Rend≈ërs√©gi teljes√≠tm√©nyb√≥nusz', 'salary')
    exports['fvg-police']:AddSalary(targetSrc, amount)

    TriggerClientEvent('fvg-notify:client:Notify', targetSrc, {
        type='success', title='üí∞ B√≥nusz',
        message='Teljes√≠tm√©nyb√≥nusz: $' .. amount
    })
end, true)</code>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">B√≠rs√°g √©s b√∂rt√∂n exportok</div>

    <!-- GetFinesByIdentifier -->
    <div class="card">
        <div class="sig">exports['fvg-police']:GetFinesByIdentifier(identifier) ‚Üí table[]</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Visszaadja az adott azonos√≠t√≥hoz tartoz√≥ √∂sszes b√≠rs√°got az adatb√°zisb√≥l,
            leg√∫jabbt√≥l a legr√©gebbiig rendezve, maximum 50 bejegyz√©s.
            Tartalmazza a ki√°ll√≠t√≥ rend≈ër adatait, az √∂sszegeket √©s a b√∂rt√∂nid≈ët.
        </div>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">id</td>          <td class="pt">number</td>  <td>B√≠rs√°g DB azonos√≠t√≥ja</td></tr>
                <tr><td class="pn">type_id</td>     <td class="pt">string</td>  <td>B√≠rs√°g t√≠pus ID (pl. <code>speeding_major</code>)</td></tr>
                <tr><td class="pn">label</td>        <td class="pt">string</td>  <td>B√≠rs√°g megjelen√≠t√©si neve</td></tr>
                <tr><td class="pn">amount</td>       <td class="pt">number</td>  <td>B√≠rs√°g √∂sszege ($)</td></tr>
                <tr><td class="pn">jail_time</td>    <td class="pt">number</td>  <td>B√∂rt√∂nid≈ë percben (0 ha nincs)</td></tr>
                <tr><td class="pn">points</td>       <td class="pt">number</td>  <td>Pontlevon√°s (jogos√≠tv√°ny)</td></tr>
                <tr><td class="pn">note</td>         <td class="pt">string</td>  <td>Megjegyz√©s sz√∂vege</td></tr>
                <tr><td class="pn">paid</td>         <td class="pt">number</td>  <td><code>0</code> = kifizetetlen, <code>1</code> = fizetve</td></tr>
                <tr><td class="pn">created_at</td>   <td class="pt">string</td>  <td>Ki√°ll√≠t√°s d√°tuma (timestamp)</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì idcard b√≠rs√°g √∂sszes√≠t≈ë</div>
        <code>-- fvg-idcard: jogos√≠tv√°ny ellen≈ërz√©skor pontlevon√°s √∂sszes√≠t√©s
RegisterNetEvent('fvg-idcard:server:CheckLicense', function(src, identifier)
    local fines = exports['fvg-police']:GetFinesByIdentifier(identifier)
    local totalPoints = 0
    for _, f in ipairs(fines) do
        if f.paid == 0 then
            totalPoints = totalPoints + (f.points or 0)
        end
    end
    if totalPoints >= 12 then
        TriggerClientEvent('fvg-idcard:client:LicenseResult', src, {
            valid  = false,
            reason = 'Pontlevon√°s miatt visszavont jogos√≠tv√°ny (' .. totalPoints .. ' pont)'
        })
    end
end)</code>
    </div>

    <!-- AddFine -->
    <div class="card">
        <div class="sig">exports['fvg-police']:AddFine(officerSrc, targetIdentifier, typeId, amount, jailTime, note) ‚Üí boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">
            B√≠rs√°got √°ll√≠t ki egy j√°t√©kosra. Automatikusan levonja az √∂sszeget a banksz√°ml√°r√≥l
            ha a c√©lszem√©ly online, √©rtes√≠ti a j√°t√©kost, √©s DB bejegyz√©st hoz l√©tre.
            Az <code>officerSrc</code> lehet <code>nil</code> rendszer √°ltal gener√°lt b√≠rs√°ghoz.
        </div>
        <table>
            <thead><tr><th>Param√©ter</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">officerSrc</td>        <td class="pt">number?</td> <td>Ki√°ll√≠t√≥ rend≈ër szerver ID (nil = rendszer)</td></tr>
                <tr><td class="pn">targetIdentifier</td>  <td class="pt">string</td>  <td>C√©lszem√©ly egyedi azonos√≠t√≥ja</td></tr>
                <tr><td class="pn">typeId</td>            <td class="pt">string</td>  <td>B√≠rs√°g t√≠pus ID a <code>Config.FineTypes</code>-b√≥l</td></tr>
                <tr><td class="pn">amount</td>            <td class="pt">number</td>  <td>√ñsszeg (min‚Äìmax k√∂z√∂tt)</td></tr>
                <tr><td class="pn">jailTime</td>          <td class="pt">number</td>  <td>B√∂rt√∂nid≈ë percben (0 ha nincs)</td></tr>
                <tr><td class="pn">note</td>              <td class="pt">string?</td> <td>Sz√∂veges megjegyz√©s</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì automatikus sebess√©g b√≠rs√°g</div>
        <code>-- fvg-radar: automatikus b√≠rs√°g ki√°ll√≠t√°s sebess√©gm√©r≈ëb≈ël
AddEventHandler('fvg-radar:server:SpeedViolation', function(identifier, speed, limit)
    local excess  = speed - limit
    local typeId  = excess > 30 and 'speeding_major' or 'speeding_minor'
    local amount  = excess > 30 and math.min(500 + excess * 30, 2000)
                                 or  math.min(200 + excess * 10, 500)

    exports['fvg-police']:AddFine(
        nil,        -- rendszer ki√°ll√≠tja (nincs officer)
        identifier,
        typeId,
        amount,
        0,          -- nincs b√∂rt√∂n
        string.format('Automatikus sebess√©gm√©r≈ë ‚Äì %d km/h (limit: %d km/h)', speed, limit)
    )
end)</code>
    </div>

    <!-- GetPrisonTime -->
    <div class="card">
        <div class="sig">exports['fvg-police']:GetPrisonTime(identifier) ‚Üí table | nil</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Visszaadja az azonos√≠t√≥hoz tartoz√≥ akt√≠v b√∂rt√∂nb√ºntet√©s adatait.
            Kisz√°m√≠tja a marad√©k id≈ët a k√∂zmunk√°val cs√∂kkentett √©rt√©kkel egy√ºtt.
            Ha nincs akt√≠v b√ºntet√©s, <code>nil</code>-t ad vissza.
        </div>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td class="pn">id</td>          <td class="pt">number</td> <td>B√∂rt√∂n bejegyz√©s DB ID</td></tr>
                <tr><td class="pn">timeMinutes</td> <td class="pt">number</td> <td>Eredeti b√∂rt√∂nid≈ë percben</td></tr>
                <tr><td class="pn">timeServed</td>  <td class="pt">number</td> <td>Eddig let√∂lt√∂tt id≈ë</td></tr>
                <tr><td class="pn">csMinutes</td>   <td class="pt">number</td> <td>K√∂zmunk√°val ledolgozott percek</td></tr>
                <tr><td class="pn">reason</td>      <td class="pt">string</td> <td>Beb√∂rt√∂nz√©s oka</td></tr>
                <tr><td class="pn">timeLeft</td>    <td class="pt">number</td> <td>Marad√©k id≈ë percben (cs√∂kkentve)</td></tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì kapunyit√°s ellen≈ërz√©s</div>
        <code>-- fvg-prison: b√∂rt√∂n belsej√©b≈ël csak azok l√©phetnek ki akik let√∂lt√∂tt√©k
RegisterNetEvent('fvg-prison:server:ExitRequest', function()
    local src = source
    local p   = exports['fvg-playercore']:GetPlayer(src)
    if not p then return end
    local prison = exports['fvg-police']:GetPrisonTime(p.identifier)
    if prison and prison.timeLeft > 0 then
        TriggerClientEvent('fvg-notify:client:Notify', src, {
            type='error',
            message='M√©g ' .. prison.timeLeft .. ' perc b√∂rt√∂n van h√°tra.'
        })
        return
    end
    -- Kapunyit√°s...
    exports['fvg-police']:ReleasePrison(p.identifier)
end)</code>
    </div>

    <!-- SendToPrison -->
    <div class="card">
        <div class="sig">exports['fvg-police']:SendToPrison(officerSrc, targetIdentifier, timeMinutes, reason) ‚Üí boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">
            B√∂rt√∂nbe k√ºldi a megadott azonos√≠t√≥j√∫ j√°t√©kost.
            Ha a c√©lszem√©ly online, automatikusan teleport√°lja a b√∂rt√∂nbe
            √©s elind√≠tja a visszasz√°ml√°l√≥t a kliens oldalon.
            Triggeri a <code>fvg-police:server:PlayerImprisoned</code> esem√©nyt.
        </div>
        <div class="cl">Lua p√©lda ‚Äì letart√≥ztat√°s kezel√©s</div>
        <code>-- fvg-cuff: bilincsel√©s ut√°n automatikus b√∂rt√∂nbe k√ºld√©s
RegisterNetEvent('fvg-cuff:server:SendToJail', function(targetSrc, time, reason)
    local src = source
    local off = exports['fvg-police']:GetOfficer(src)
    if not off or not off.duty then return end
    if not exports['fvg-police'].HasPermission or
       not Config.HasPermission(off.grade, 'can_prison') then return end

    local p = exports['fvg-playercore']:GetPlayer(targetSrc)
    if not p then return end

    exports['fvg-police']:SendToPrison(src, p.identifier, time, reason)
end)</code>
    </div>

    <!-- ReleasePrison -->
    <div class="card">
        <div class="sig">exports['fvg-police']:ReleasePrison(targetIdentifier) ‚Üí boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">
            Szabadon engedi a b√∂rt√∂nb≈ël a megadott azonos√≠t√≥j√∫ j√°t√©kost.
            Friss√≠ti a DB st√°tuszt <code>released</code>-re, t√∂rli a cache bejegyz√©st,
            √©s ha a c√©lszem√©ly online, teleport√°lja a b√∂rt√∂n kij√°rat√°hoz.
        </div>
        <div class="cl">Lua p√©lda ‚Äì √ºgyv√©d √°ltal fizetett √≥vad√©k</div>
        <code>-- fvg-lawyer: √≥vad√©k kifizet√©se ut√°n szabadon enged√©s
RegisterNetEvent('fvg-lawyer:server:PayBail', function(targetIdentifier, bailAmount)
    local src = source
    local ok  = exports['fvg-banking']:RemoveBalance(src, bailAmount, 'checking',
        '√ìvad√©k kifizet√©s', 'payment')
    if not ok then
        TriggerClientEvent('fvg-notify:client:Notify', src, {
            type='error', message='Nincs el√©g egyenleg az √≥vad√©khoz.'
        })
        return
    end
    exports['fvg-police']:ReleasePrison(targetIdentifier)
    TriggerClientEvent('fvg-notify:client:Notify', src, {
        type='success', message='√ìvad√©k fizetve. A fogoly szabadon engedve.'
    })
end)</code>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Kliens exportok</div>

    <div class="card">
        <div class="sig">exports['fvg-police']:IsPlayerOnDuty() ‚Üí boolean</div>
        <span class="side sc">Client</span>
        <div class="desc">
            Visszaadja, hogy a helyi j√°t√©kos jelenleg rend≈ëri szolg√°latban van-e.
            M√°s scriptek kliens oldalon ezzel ellen≈ërizhetik a duty st√°tuszt an√©lk√ºl,
            hogy szerver h√≠v√°st kellene ind√≠tani.
        </div>
        <div class="cl">Lua p√©lda</div>
        <code>-- fvg-speedcam: csak duty rend≈ër l√°tja a sebess√©g kamer√°kat
CreateThread(function()
    while true do
        Wait(0)
        if exports['fvg-police']:IsPlayerOnDuty() then
            -- Kamera blipek megjelen√≠t√©se
            DrawSpeedCameraMarkers()
        end
    end
end)</code>
    </div>

    <div class="card">
        <div class="sig">exports['fvg-police']:GetLocalOfficer() ‚Üí table | nil</div>
        <span class="side sc">Client</span>
        <div class="desc">
            Visszaadja a helyi j√°t√©kos rend≈ër adatait a kliens oldali cache-b≈ël.
            A men√º legut√≥bbi megnyit√°sakor friss√ºl. Nem ind√≠t szerver k√©r√©st.
        </div>
        <div class="cl">Lua p√©lda</div>
        <code>-- fvg-hud: rang √©s callsign megjelen√≠t√©se a HUD-on
CreateThread(function()
    while true do
        Wait(1000)
        local off = exports['fvg-police']:GetLocalOfficer()
        if off and off.duty then
            exports['fvg-hud']:SetJobBadge({
                label    = off.rankLabel,
                callsign = off.callsign or '‚Äì',
                icon     = 'hgi-stroke hgi-police-badge-01',
                color    = '#38bdf8',
            })
        end
    end
end)</code>
    </div>

    <div class="card">
        <div class="sig">exports['fvg-police']:OpenPoliceMenu(stationId?) ‚Üí void</div>
        <span class="side sc">Client</span>
        <div class="desc">
            Programatikusan megnyitja a rend≈ërs√©gi men√ºt a megadott √°llom√°shoz k√∂tve.
            Ha a <code>stationId</code> nincs megadva, alap√©rtelmezett (<code>mission_row</code>) ker√ºl haszn√°latra.
            Nem nyitja meg, ha m√°r nyitva van egy men√º.
        </div>
        <div class="cl">Lua p√©lda ‚Äì NPC p√°rbesz√©d alap√∫ megnyit√°s</div>
        <code>-- fvg-dialogue: rend≈ërkapit√°ny NPC megnyitja a men√ºt
RegisterNetEvent('fvg-dialogue:client:OpenPoliceHQ', function(stationId)
    exports['fvg-police']:OpenPoliceMenu(stationId)
end)</code>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Szerver esem√©ny lista</div>
    <div class="card">
        <table>
            <thead>
                <tr>
                    <th>Esem√©ny neve</th>
                    <th>Param√©terek</th>
                    <th>Mikor triggerel</th>
                </tr>
            </thead>
            <tbody class="evt-row">
                <tr class="evt-row">
                    <td>fvg-police:server:VehiclePurchased</td>
                    <td>src, model, plate, price, method</td>
                    <td>Sikeres v√°s√°rl√°s (√∂r√∂k√∂lt fvg-autoshop)</td>
                </tr>
                <tr class="evt-row">
                    <td>fvg-police:server:PlayerImprisoned</td>
                    <td>identifier, timeMinutes, reason</td>
                    <td>J√°t√©kos b√∂rt√∂nbe ker√ºl</td>
                </tr>
                <tr class="evt-row">
                    <td>fvg-police:server:FineIssued</td>
                    <td>officerSrc, targetIdentifier, typeId, amount, jailTime</td>
                    <td>B√≠rs√°g ki√°ll√≠t√°sa ut√°n</td>
                </tr>
                <tr class="evt-row">
                    <td>fvg-police:server:LeaveUnit</td>
                    <td>src</td>
                    <td>Rend≈ër elhagyja az egys√©g√©t (disconnect, duty off)</td>
                </tr>
                <tr class="evt-row">
                    <td>fvg-police:server:TestDriveCompleted</td>
                    <td>src, model, returned</td>
                    <td>Tesztvezet√©s befejezve (√∂r√∂k√∂lt fvg-autoshop)</td>
                </tr>
            </tbody>
        </table>
        <div class="cl">Lua p√©lda ‚Äì Discord webhook esem√©nyekre</div>
        <code>-- Minden beb√∂rt√∂nz√©st logolunk Discord-ra
AddEventHandler('fvg-police:server:PlayerImprisoned', function(identifier, time, reason)
    exports['fvg-discord']:SendWebhook('prison_log', string.format(
        '‚õìÔ∏è **Beb√∂rt√∂nz√©s** | Azonos√≠t√≥: `%s` | Id≈ë: %d perc | Ok: %s',
        identifier, time, reason
    ))
end)

-- B√≠rs√°g statisztika
AddEventHandler('fvg-police:server:FineIssued', function(offSrc, ident, typeId, amount, jail)
    local off = exports['fvg-police']:GetOfficer(offSrc)
    if not off then return end
    exports['fvg-discord']:SendWebhook('fines_log', string.format(
        'üìã **B√≠rs√°g** | Rend≈ër: %s %s | Azonos√≠t√≥: `%s` | T√≠pus: %s | $%d',
        off.firstname, off.lastname, ident, typeId, amount
    ))
end)</code>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Modul architekt√∫ra</div>
    <div class="card">
        <div class="desc">
            Minden modul a <code>modules/</code> mapp√°ban √©l, √©s automatikusan beolvas√≥dik
            a <code>fxmanifest.lua</code> glob mint√°j√°nak (<code>modules/*/server.lua</code>,
            <code>modules/*/client.lua</code>) k√∂sz√∂nhet≈ëen.
            Egy modul a k√∂vetkez≈ë interf√©szen kereszt√ºl regisztr√°lja mag√°t:
        </div>
        <div class="cl">Modul regisztr√°ci√≥ ‚Äì szerver oldal</div>
        <code>-- modules/mymodule/server.lua
RegisterModule('mymodule', {
    -- Hozz√°f√©r√©s ellen≈ërz√©s: mikor l√°that√≥ a modul a men√ºben?
    checkAccess = function(off)
        return Config.HasPermission(off.grade, 'can_something')
    end
})</code>
        <div class="cl">Modul regisztr√°ci√≥ ‚Äì kliens oldal</div>
        <code>-- modules/mymodule/client.lua
RegisterClientModule('mymodule', {
    -- NUI callback-ek kezel√©se (opcion√°lis)
    onAction = function(action, payload, cb)
        if action == 'doSomething' then
            -- Helyi logika vagy szerver tov√°b√≠t√°s
            TriggerServerEvent('fvg-police:server:ModuleAction',
                'mymodule', action, payload)
        end
        cb('ok')
    end
})</code>
        <div class="cl">Szerver akci√≥ kezel≈ë</div>
        <code>-- A modul fogadja az akci√≥t a f≈ë dispatcher-t≈ël
RegisterNetEvent('fvg-police:server:ModuleAction', function(module, action, payload)
    if module ~= 'mymodule' then return end
    local src = source
    local off = exports['fvg-police']:GetOfficer(src)
    if not off or not off.duty then return end

    if action == 'doSomething' then
        -- Logika...
    end
end)</code>
        <div class="info" style="margin-top:14px">
            <i class="hgi-stroke hgi-information-circle"></i>
            <span>A modul automatikusan megjelenik a men√º navig√°ci√≥ban ha
            <code>Config.Modules[id].enabled = true</code> √©s a
            <code>checkAccess(off)</code> f√ºggv√©ny <code>true</code>-t ad vissza.
            A UI-t <strong>nem kell m√≥dos√≠tani</strong> ‚Äî az app.js dinamikusan rendereli a modul gombot.</span>
        </div>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Duty folyamat (flow)</div>
    <div class="card">
        <div class="flow">
            <div class="flow-step">
                <div class="flow-num">1</div>
                <div class="flow-label"><strong>Kliens:</strong> J√°t√©kos megk√∂zel√≠ti az √°llom√°st ‚Üí [E] interakci√≥</div>
                <span class="flow-badge fb-c">Client</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">2</div>
                <div class="flow-label"><strong>Szerver:</strong> <code>RequestMenu</code> ‚Üí rend≈ër adatok + modul lista √∂ssze√°ll√≠t√°s</div>
                <span class="flow-badge fb-s">Server</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">3</div>
                <div class="flow-label"><strong>Kliens:</strong> NUI panel megny√≠lik, modulok automatikusan renderelve</div>
                <span class="flow-badge fb-c">Client</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">4</div>
                <div class="flow-label"><strong>Kliens:</strong> ‚ÄûSzolg√°latba l√©p" ‚Üí <code>ToggleDuty</code> szerver event</div>
                <span class="flow-badge fb-c">Client</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">5</div>
                <div class="flow-label"><strong>Szerver:</strong> Duty flag v√°lt√°s, napl√≥ bejegyz√©s, <code>DutyChanged</code> kliens event</div>
                <span class="flow-badge fb-s">Server</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">6</div>
                <div class="flow-label"><strong>Fizet√©s ciklus:</strong> <code>Config.SalaryInterval</code> m√°sodpercenk√©nt ‚Üí rang alapj√°n <code>fvg-banking</code></div>
                <span class="flow-badge fb-d">Auto</span>
            </div>
            <div class="flow-step">
                <div class="flow-num">7</div>
                <div class="flow-label"><strong>Kliens:</strong> Duty badge, modul jogosults√°gok √©s HUD friss√ºlnek</div>
                <span class="flow-badge fb-c">Client</span>
            </div>
        </div>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Interakt√≠v export demo</div>
    <div class="card">
        <div class="dgrid">
            <!-- GetOfficer / IsOnDuty -->
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-police-badge-01"></i>GetOfficer / IsOnDuty</div>
                <input class="dinp" id="d-src" type="number" placeholder="source (pl. 1)" value="1"/>
                <button class="dbtn ba" onclick="demoGetOfficer()">
                    <i class="hgi-stroke hgi-police-badge-01"></i>GetOfficer
                </button>
                <button class="dbtn bs" onclick="demoIsOnDuty()">
                    <i class="hgi-stroke hgi-checkmark-02"></i>IsOnDuty
                </button>
                <div class="dout" id="d-off-out">‚Äî</div>
            </div>

            <!-- SetOfficerRank / AddSalary -->
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-star-02"></i>SetOfficerRank / AddSalary</div>
                <input class="dinp" id="d-rank-src" type="number" placeholder="source" value="1"/>
                <select class="dsel" id="d-rank-grade">
                    <option value="0">0 ‚Äì √öjonc</option>
                    <option value="1">1 ‚Äì Rend≈ër</option>
                    <option value="2">2 ‚Äì Vezet≈ë Rend≈ër</option>
                    <option value="3" selected>3 ‚Äì ≈êrmester</option>
                    <option value="4">4 ‚Äì F≈ëhadnagy</option>
                    <option value="5">5 ‚Äì Rend≈ërkapit√°ny</option>
                </select>
                <button class="dbtn bp" onclick="demoSetRank()">
                    <i class="hgi-stroke hgi-star-02"></i>SetOfficerRank
                </button>
                <button class="dbtn bs" onclick="demoAddSalary()">
                    <i class="hgi-stroke hgi-money-02"></i>AddSalary (+500)
                </button>
                <div class="dout" id="d-rank-out">‚Äî</div>
            </div>
        </div>

        <div class="dgrid" style="margin-top:12px">
            <!-- AddFine / GetFines -->
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-file-02"></i>AddFine / GetFinesByIdentifier</div>
                <input class="dinp" id="d-fine-ident" type="text"
                       placeholder="Azonos√≠t√≥ (pl. steam:abc123)" value="steam:abc123"/>
                <select class="dsel" id="d-fine-type">
                    <option value="speeding_minor">Gyorshajt√°s (enyhe) ‚Äì $200‚Äì500</option>
                    <option value="speeding_major">Gyorshajt√°s (s√∫lyos) ‚Äì $500‚Äì2000</option>
                    <option value="dui">Ittas vezet√©s ‚Äì $1500‚Äì5000</option>
                    <option value="assault">Testi s√©rt√©s ‚Äì $2000‚Äì8000</option>
                    <option value="drug_possession">K√°b√≠t√≥szer birtok. ‚Äì $2000‚Äì8000</option>
                </select>
                <button class="dbtn bd" onclick="demoAddFine()">
                    <i class="hgi-stroke hgi-file-02"></i>AddFine
                </button>
                <button class="dbtn ba" onclick="demoGetFines()">
                    <i class="hgi-stroke hgi-search-02"></i>GetFinesByIdentifier
                </button>
                <div class="dout" id="d-fine-out">‚Äî</div>
            </div>

            <!-- SendToPrison / GetPrisonTime / ReleasePrison -->
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-jail"></i>Prison exportok</div>
                <input class="dinp" id="d-prison-ident" type="text"
                       placeholder="Azonos√≠t√≥" value="steam:abc123"/>
                <input class="dinp" id="d-prison-time" type="number"
                       placeholder="Id≈ë (perc)" value="15"/>
                <button class="dbtn bd" onclick="demoSendToPrison()">
                    <i class="hgi-stroke hgi-jail"></i>SendToPrison
                </button>
                <button class="dbtn bw" onclick="demoGetPrisonTime()">
                    <i class="hgi-stroke hgi-clock-02"></i>GetPrisonTime
                </button>
                <button class="dbtn bs" onclick="demoReleasePrison()">
                    <i class="hgi-stroke hgi-lock-02"></i>ReleasePrison
                </button>
                <div class="dout" id="d-prison-out">‚Äî</div>
            </div>
        </div>

        <div class="info" style="margin-top:14px">
            <i class="hgi-stroke hgi-information-circle"></i>
            <span>Ez egy interakt√≠v szimul√°ci√≥ ‚Äî FiveM szerver n√©lk√ºl is bemutatja az exportok
            visszat√©r√©si √©rt√©keit √©s lehets√©ges hibak√≥djait. √âles k√∂rnyezetben a Lua exportokat
            kell haszn√°lni a fenti p√©ld√°k szerint.</span>
        </div>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Emergency job sablonok</div>
    <div class="card">
        <div class="desc">
            Az <code>fvg-police</code> alapk√©nt szolg√°l. Egy √∫j emergency job l√©trehoz√°s√°hoz
            csak a <code>config.lua</code>-t kell fel√ºl√≠rni ‚Äî a modul rendszer √©s az UI
            automatikusan alkalmazkodik.
        </div>
        <div class="job-grid">
            <div class="job-card">
                <div class="jc-icon" style="color:#f97316">üî•</div>
                <div class="jc-name">fvg-firefighter</div>
                <div class="jc-sub">MDT + b√≠rs√°g ki, dispatch + vizsg√°lat modul be. J√°rm≈±vek: t≈±zolt√≥aut√≥k.</div>
            </div>
            <div class="job-card">
                <div class="jc-icon" style="color:#22c55e">üå≤</div>
                <div class="jc-name">fvg-ranger</div>
                <div class="jc-sub">B√∂rt√∂n + MDT ki, vad√°szat ellen≈ërz√©s + b√≠rs√°g be. J√°rm≈±vek: offroad.</div>
            </div>
            <div class="job-card">
                <div class="jc-icon" style="color:#ef4444">üöë</div>
                <div class="jc-name">fvg-ems</div>
                <div class="jc-sub">B√≠rs√°g + b√∂rt√∂n ki, beteg kezel√©s + gy√≥gyszer modul be. J√°rm≈±vek: ment≈ëk.</div>
            </div>
        </div>
        <div class="cl" style="margin-top:14px">√öj job minim√°lis config</div>
        <code>-- fvg-firefighter/config.lua
Config.JobName   = 'firefighter'
Config.JobLabel  = 'T≈±zolt√≥s√°g'
Config.JobIcon   = 'hgi-stroke hgi-fire-02'
Config.JobColor  = '#f97316'

-- Modulok testreszab√°sa
Config.Modules.mdt.enabled    = false
Config.Modules.fines.enabled  = false
Config.Modules.prison.enabled = false

-- √öj egyedi modul hozz√°ad√°sa (automatikusan megjelenik a men√ºben)
Config.Modules.dispatch = {
    enabled = true,
    label   = 'T≈±zriaszt√°s',
    icon    = 'hgi-stroke hgi-alarm-02',
}

-- modules/dispatch/server.lua ‚Üí RegisterModule('dispatch', {...})
-- modules/dispatch/client.lua ‚Üí RegisterClientModule('dispatch', {...})</code>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section>
    <div class="st">Kompatibilit√°s m√°s fvg scriptekkel</div>
    <div class="card">
        <div class="compat-grid">
            <div class="compat-card">
                <div class="cc-name">fvg-banking</div>
                <div class="cc-type">Akt√≠v integr√°ci√≥</div>
                <div class="cc-desc">Fizet√©s, b√≠rs√°g levon√°s (<code>RemoveBalance</code>), elenged√©s ut√°n √≥vad√©k (<code>AddBalance</code>), salary (<code>AddBalance</code>)</div>
            </div>
            <div class="compat-card">
                <div class="cc-name">fvg-playercore</div>
                <div class="cc-type">Akt√≠v integr√°ci√≥</div>
                <div class="cc-desc">J√°t√©kos adatok (<code>GetPlayer</code>), k√©szp√©nz kezel√©s, bet√∂lt√©si √©s kil√©p√©si esem√©nyek</div>
            </div>
            <div class="compat-card">
                <div class="cc-name">fvg-database</div>
                <div class="cc-type">Akt√≠v integr√°ci√≥</div>
                <div class="cc-desc">Migr√°ci√≥, <code>Query</code>, <code>Insert</code>, <code>Execute</code>, <code>QuerySingle</code> minden DB m≈±velethez</div>
            </div>
            <div class="compat-card">
                <div class="cc-name">fvg-notify</div>
                <div class="cc-type">Akt√≠v integr√°ci√≥</div>
                <div class="cc-desc">Minden visszajelz√©s (<code>fvg-notify:client:Notify</code>) √©rtes√≠t√©s ezen kereszt√ºl √©rkezik</div>
            </div>
            <div class="compat-card">
                <div class="cc-name">fvg-inventory</div>
                <div class="cc-type">Akt√≠v integr√°ci√≥</div>
                <div class="cc-desc">T√°rol√≥k megnyit√°s√°hoz (<code>OpenStorage</code>) szem√©lyes √©s k√∂z√∂s rend≈ërs√©gi t√°rol√≥kn√°l</div>
            </div>
            <div class="compat-card">
                <div class="cc-name">fvg-idcard</div>
                <div class="cc-type">Akt√≠v integr√°ci√≥</div>
                <div class="cc-desc">Jogos√≠tv√°ny ellen≈ërz√©s (<code>HasLicense</code>), pontlevon√°s √∂sszes√≠t√©s b√≠rs√°gokb√≥l</div>
            </div>
            <div class="compat-card">
                <div class="cc-name">fvg-admin</div>
                <div class="cc-type">Akt√≠v integr√°ci√≥</div>
                <div class="cc-desc">Admin parancsok jogosults√°g ellen≈ërz√©se (<code>IsAdmin</code>) ‚Äî hire, fire, setrank</div>
            </div>
            <div class="compat-card">
                <div class="cc-name">fvg-autoshop</div>
                <div class="cc-type">Export fogyaszt√≥</div>
                <div class="cc-desc">Rend≈ërs√©gi j√°rm≈±vek kiv√©tel√©n√©l a gar√°zs modul az autoshop j√°rm≈± rendszert haszn√°lja alapul</div>
            </div>
            <div class="compat-card">
                <div class="cc-name">fvg-dispatch</div>
                <div class="cc-type">Export fogyaszt√≥</div>
                <div class="cc-desc"><code>GetOnDutyOfficers</code> √©s <code>GetOfficerUnit</code> exportokat haszn√°lja a 911-es h√≠v√°sok kioszt√°s√°hoz</div>
            </div>
        </div>
    </div>
</section>

<script>
// ‚îÄ‚îÄ Szimul√°lt adatok ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const mockOfficers = {
    1: { id:1, identifier:'steam:abc123', grade:3, rankName:'sergeant', rankLabel:'≈êrmester',
         firstname:'Kiss', lastname:'P√©ter', callsign:'A-12', duty:true,
         unit:1, hireDate:'2025-06-01', totalSalary:145000 },
    2: { id:2, identifier:'steam:def456', grade:1, rankName:'officer', rankLabel:'Rend≈ër',
         firstname:'Nagy', lastname:'√Åd√°m', callsign:'B-07', duty:false,
         unit:null, hireDate:'2025-11-15', totalSalary:42000 },
};
const ranks = [
    { grade:0, name:'recruit',       label:'√öjonc',          salary:800  },
    { grade:1, name:'officer',       label:'Rend≈ër',         salary:1200 },
    { grade:2, name:'senior_officer',label:'Vezet≈ë Rend≈ër',  salary:1600 },
    { grade:3, name:'sergeant',      label:'≈êrmester',       salary:2200 },
    { grade:4, name:'lieutenant',    label:'F≈ëhadnagy',      salary:3000 },
    { grade:5, name:'chief',         label:'Rend≈ërkapit√°ny', salary:5000 },
];
const fineDB = [];
const prisonDB = {};

const fineTypeDefs = {
    speeding_minor: { label:'Gyorshajt√°s (enyhe)',   min:200,  max:500,   jail:0  },
    speeding_major: { label:'Gyorshajt√°s (s√∫lyos)',  min:500,  max:2000,  jail:0  },
    dui:            { label:'Ittas vezet√©s',          min:1500, max:5000,  jail:15 },
    assault:        { label:'Testi s√©rt√©s',           min:2000, max:8000,  jail:30 },
    drug_possession:{ label:'K√°b√≠t√≥szer birtok.',     min:2000, max:8000,  jail:30 },
};

function setOut(id, msg, cls='') {
    const el = document.getElementById(id);
    el.textContent = msg;
    el.className = 'dout ' + cls;
}

function demoGetOfficer() {
    const src = parseInt(document.getElementById('d-src').value);
    const off = mockOfficers[src];
    if (!off) { setOut('d-off-out', `GetOfficer(${src}) ‚Üí nil`, 'warn'); return; }
    setOut('d-off-out',
        `GetOfficer(${src}) ‚Üí\n{ grade:${off.grade}, rankLabel:"${off.rankLabel}",\n` +
        `  name:"${off.firstname} ${off.lastname}", callsign:"${off.callsign}",\n` +
        `  duty:${off.duty}, unit:${off.unit}, totalSalary:$${off.totalSalary.toLocaleString('hu-HU')} }`,
        'ok'
    );
}

function demoIsOnDuty() {
    const src = parseInt(document.getElementById('d-src').value);
    const off = mockOfficers[src];
    const result = off ? off.duty : false;
    setOut('d-off-out', `IsOnDuty(${src}) ‚Üí ${result}`, result ? 'ok' : 'warn');
}

function demoSetRank() {
    const src   = parseInt(document.getElementById('d-rank-src').value);
    const grade = parseInt(document.getElementById('d-rank-grade').value);
    const rank  = ranks.find(r => r.grade === grade);
    const off   = mockOfficers[src];
    if (!off)  { setOut('d-rank-out', `SetOfficerRank(${src}, ${grade}) ‚Üí false (nem rend≈ër)`, 'err'); return; }
    if (!rank) { setOut('d-rank-out', `SetOfficerRank(${src}, ${grade}) ‚Üí false (√©rv√©nytelen rang)`, 'err'); return; }
    off.grade      = grade;
    off.rankName   = rank.name;
    off.rankLabel  = rank.label;
    setOut('d-rank-out',
        `SetOfficerRank(${src}, ${grade}) ‚Üí true\n√öj rang: "${rank.label}" | Fizet√©s: $${rank.salary}/ciklus`,
        'ok'
    );
}

function demoAddSalary() {
    const src = parseInt(document.getElementById('d-rank-src').value);
    const off = mockOfficers[src];
    if (!off) { setOut('d-rank-out', `AddSalary(${src}, 500) ‚Üí false`, 'err'); return; }
    off.totalSalary += 500;
    setOut('d-rank-out',
        `AddSalary(${src}, 500) ‚Üí true\n√ñsszes kapott fizet√©s: $${off.totalSalary.toLocaleString('hu-HU')}`,
        'ok'
    );
}

function demoAddFine() {
    const ident  = document.getElementById('d-fine-ident').value.trim();
    const typeId = document.getElementById('d-fine-type').value;
    const ft     = fineTypeDefs[typeId];
    if (!ident || !ft) { setOut('d-fine-out', 'Hiba: √©rv√©nytelen adatok', 'err'); return; }
    const amount = Math.floor(Math.random() * (ft.max - ft.min) + ft.min);
    const fine = {
        id: fineDB.length + 1, identifier: ident,
        type_id: typeId, label: ft.label,
        amount, jail_time: ft.jail, paid: 0,
        created_at: new Date().toISOString().slice(0,19).replace('T',' ')
    };
    fineDB.push(fine);
    setOut('d-fine-out',
        `AddFine(src, "${ident}", "${typeId}", ${amount}, ${ft.jail}) ‚Üí true\n` +
        `B√≠rs√°g ID: ${fine.id} | $${amount.toLocaleString('hu-HU')}` +
        (ft.jail > 0 ? ` | ${ft.jail} perc b√∂rt√∂n` : '') + '\nLevonva a banksz√°ml√°r√≥l.',
        'ok'
    );
}

function demoGetFines() {
    const ident = document.getElementById('d-fine-ident').value.trim();
    const found = fineDB.filter(f => f.identifier === ident);
    if (!found.length) {
        setOut('d-fine-out', `GetFinesByIdentifier("${ident}") ‚Üí [] (√ºres)`, 'warn'); return;
    }
    const total = found.reduce((s, f) => s + f.amount, 0);
    setOut('d-fine-out',
        `GetFinesByIdentifier("${ident}") ‚Üí\n${found.length} b√≠rs√°g | √ñsszesen: $${total.toLocaleString('hu-HU')}\n` +
        found.map(f => `  [${f.id}] ${f.label} ‚Äì $${f.amount} ‚Äì ${f.paid ? 'Fizetve' : 'Kifizetetlen'}`).join('\n'),
        'ok'
    );
}

function demoSendToPrison() {
    const ident = document.getElementById('d-prison-ident').value.trim();
    const time  = parseInt(document.getElementById('d-prison-time').value) || 10;
    prisonDB[ident] = {
        id: Math.floor(Math.random()*900)+100,
        timeMinutes: time, timeServed: 0, csMinutes: 0,
        reason: 'Demo beb√∂rt√∂nz√©s',
        timeLeft: time,
    };
    setOut('d-prison-out',
        `SendToPrison(src, "${ident}", ${time}, "Demo") ‚Üí true\n` +
        `B√∂rt√∂n ID: ${prisonDB[ident].id} | Id≈ë: ${time} perc\nJ√°t√©kos teleport√°lva a b√∂rt√∂nbe.`,
        'ok'
    );
}

function demoGetPrisonTime() {
    const ident = document.getElementById('d-prison-ident').value.trim();
    const p = prisonDB[ident];
    if (!p) { setOut('d-prison-out', `GetPrisonTime("${ident}") ‚Üí nil`, 'warn'); return; }
    setOut('d-prison-out',
        `GetPrisonTime("${ident}") ‚Üí\n{ timeMinutes:${p.timeMinutes},\n` +
        `  timeServed:${p.timeServed}, csMinutes:${p.csMinutes},\n` +
        `  timeLeft:${p.timeLeft}, reason:"${p.reason}" }`,
        'ok'
    );
}

function demoReleasePrison() {
    const ident = document.getElementById('d-prison-ident').value.trim();
    if (!prisonDB[ident]) {
        setOut('d-prison-out', `ReleasePrison("${ident}") ‚Üí false (nincs akt√≠v b√ºntet√©s)`, 'err'); return;
    }
    delete prisonDB[ident];
    setOut('d-prison-out',
        `ReleasePrison("${ident}") ‚Üí true\nSt√°tusz: released | J√°t√©kos teleport√°lva a kij√°rathoz.`,
        'ok'
    );
}
</script>

</body>
</html>