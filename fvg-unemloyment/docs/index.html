<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8"/>
    <title>fvg-unemployment – Export dokumentáció</title>
    <link rel="stylesheet" href="https://use.hugeicons.com/font/icons.css"/>
    <style>
        :root{--bg:#0a0c12;--card:#161b24;--code:#0f172a;--border:#1e293b;--tp:#f1f5f9;--ts:#94a3b8;--tm:#475569;--ac:#38bdf8;--font:'Segoe UI',system-ui,sans-serif}
        *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
        body{background:var(--bg);color:var(--tp);font-family:var(--font);padding:48px 28px 120px;max-width:1020px;margin:0 auto}
        h1{font-size:28px;font-weight:800;margin-bottom:6px}
        .sub{color:var(--tm);font-size:14px;line-height:1.7;margin-bottom:48px}
        .badge{display:inline-block;background:rgba(56,189,248,.12);color:var(--ac);font-size:11px;font-weight:700;padding:2px 10px;border-radius:20px;letter-spacing:.05em;margin-left:10px;border:1px solid rgba(56,189,248,.25)}
        section{margin-bottom:44px}
        .st{font-size:11px;font-weight:700;color:var(--tm);text-transform:uppercase;letter-spacing:.1em;border-bottom:1px solid var(--border);padding-bottom:10px;margin-bottom:16px}
        .card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:22px 24px;margin-bottom:14px}
        .sig{font-family:monospace;font-size:13px;font-weight:700;color:var(--ac);margin-bottom:6px;line-height:1.9}
        .side{display:inline-block;font-size:10px;font-weight:700;padding:2px 8px;border-radius:4px;text-transform:uppercase;letter-spacing:.06em;margin-bottom:10px}
        .ss{background:rgba(239,68,68,.12);color:#ef4444;border:1px solid rgba(239,68,68,.25)}
        .sc{background:rgba(34,197,94,.12);color:#22c55e;border:1px solid rgba(34,197,94,.25)}
        .desc{font-size:13px;color:var(--ts);line-height:1.65;margin-bottom:14px}
        table{width:100%;border-collapse:collapse;margin-bottom:14px}
        th{font-size:10px;font-weight:700;color:var(--tm);text-transform:uppercase;letter-spacing:.08em;text-align:left;padding:6px 10px;border-bottom:1px solid var(--border)}
        td{font-size:12px;padding:8px 10px;border-bottom:1px solid rgba(255,255,255,.04);color:var(--ts);vertical-align:top}
        tr:last-child td{border-bottom:none}
        .pn{font-family:monospace;color:#a78bfa}.pt{font-family:monospace;color:#f59e0b}.pv{font-family:monospace;color:#7dd3fc}
        .cl{font-size:10px;font-weight:700;color:var(--tm);text-transform:uppercase;letter-spacing:.08em;margin-bottom:6px;margin-top:14px}
        code{display:block;background:var(--code);border:1px solid var(--border);border-radius:8px;padding:14px 16px;font-size:12px;color:#7dd3fc;font-family:'Cascadia Code','Fira Code',monospace;white-space:pre;overflow-x:auto;line-height:1.7}
        .info{display:flex;align-items:flex-start;gap:10px;padding:12px 16px;border-radius:8px;background:rgba(56,189,248,.07);border:1px solid rgba(56,189,248,.2);font-size:12px;color:#93c5fd;line-height:1.6;margin-top:14px}
        .info i{font-size:16px;flex-shrink:0;color:var(--ac)}
        .dgrid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
        .dc{background:var(--code);border:1px solid var(--border);border-radius:10px;padding:16px;display:flex;flex-direction:column;gap:8px}
        .dct{font-size:11px;font-weight:700;color:var(--tm);text-transform:uppercase;letter-spacing:.08em;display:flex;align-items:center;gap:7px}
        .dct i{font-size:14px;color:var(--ac)}
        .dbtn{display:flex;align-items:center;justify-content:center;gap:7px;padding:8px 14px;border-radius:8px;border:none;font-size:12px;font-weight:600;cursor:pointer;transition:opacity .15s;font-family:var(--font);width:100%}
        .dbtn:hover{opacity:.8}
        .ba{background:rgba(56,189,248,.15);color:#38bdf8;border:1px solid rgba(56,189,248,.25)}
        .bs{background:rgba(34,197,94,.15);color:#22c55e;border:1px solid rgba(34,197,94,.25)}
        .bd{background:rgba(239,68,68,.15);color:#ef4444;border:1px solid rgba(239,68,68,.25)}
        .bw{background:rgba(245,158,11,.15);color:#f59e0b;border:1px solid rgba(245,158,11,.25)}
        .dout{font-family:monospace;font-size:11px;color:var(--tm);min-height:16px}
        .dout.ok{color:#22c55e}.dout.err{color:#ef4444}
        .dsel,.dinp{background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:7px;padding:7px 10px;color:var(--tp);font-size:12px;outline:none;font-family:var(--font);width:100%}
    </style>
</head>
<body>

<h1>fvg-unemployment <span class="badge">v1.0.0</span></h1>
<p class="sub">FirstVideos Group · Munkanélküliségi segély és álláshirdetési rendszer.<br>
DB: <code style="color:#7dd3fc;font-size:12px">fvg_unemployment · fvg_job_applications</code><br>
Integrációk: <strong>fvg-playercore</strong> (job váltás) · <strong>fvg-banking</strong> (segély kifizetés) · <strong>fvg-idcard</strong> (jogosítvány ellenőrzés) · <strong>fvg-inventory</strong> (feladat item check)</p>

<section>
    <div class="st">Szerver exportok</div>

    <div class="card">
        <div class="sig">exports['fvg-unemployment']:IsUnemployed(source) → boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">Ellenőrzi, hogy a játékos jelenleg munkanélküli-e (<code>Config.BenefitEligibleJob</code> alapján). Más scriptek is hívhatják pl. bónusz jutalmakhoz, missziókhoz.</div>
        <div class="cl">Lua példa</div>
        <code>-- Misszió bónusz munkanélkülieknek
if exports['fvg-unemployment']:IsUnemployed(src) then
    exports['fvg-banking']:AddBalance(src, missionReward * 1.25)
else
    exports['fvg-banking']:AddBalance(src, missionReward)
end</code>
    </div>

    <div class="card">
        <div class="sig">exports['fvg-unemployment']:ClaimBenefit(source) → boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">Megkísérli a segély igénylését. Ellenőrzi a jogosultságot, cooldownt és a claim limitet. Automatikusan értesíti a játékost és fizet az <code>fvg-banking</code>-en keresztül.</div>
        <div class="cl">Lua példa – admin parancs</div>
        <code>-- Admin kényszerített segély kifizetés
RegisterCommand('givebenefit', function(src, args)
    if not exports['fvg-admin']:IsAdmin(src) then return end
    local target = tonumber(args[1])
    exports['fvg-unemployment']:ClaimBenefit(target)
end, true)</code>
    </div>

    <div class="card">
        <div class="sig">exports['fvg-unemployment']:ApplyForJob(source, jobId) → boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">Azonnali állásba lépés. Ellenőrzi a slot-ot, követelményeket (életkor, jogosítvány), majd az <code>fvg-playercore:SetJob</code> exporton keresztül elvégzi a job váltást és nullázza a segélyadatokat.</div>
        <div class="cl">Lua példa – NPC interakció</div>
        <code>-- Taxi állomásnál NPC kínálja az állást
RegisterNetEvent('fvg-taxi:server:JoinJob', function()
    local src = source
    exports['fvg-unemployment']:ApplyForJob(src, 'taxi')
end)</code>
    </div>

    <div class="card">
        <div class="sig">exports['fvg-unemployment']:SetBenefitEligible(source, state) → boolean</div>
        <span class="side ss">Server</span>
        <div class="desc">Manuálisan állítja a segélyre való jogosultságot. Felhasználható büntetésre (pl. bűnözési szint) vagy adminisztratív célra.</div>
    </div>

    <div class="card">
        <div class="sig">exports['fvg-unemployment']:GetAvailableJobs(source) → table[]</div>
        <span class="side ss">Server</span>
        <div class="desc">Visszaadja az összes elérhető állást a játékos szempontjából: tartalmazza a slot-állapotot, a követelmény-teljesítést és a részletes hibaüzeneteket.</div>
    </div>
</section>

<section>
    <div class="st">Kliens exportok</div>
    <div class="card">
        <div class="sig">exports['fvg-unemployment']:GetLocalUnemploymentData() → table</div>
        <div class="sig">exports['fvg-unemployment']:IsLocalUnemployed() → boolean</div>
        <span class="side sc">Client</span>
        <div class="desc">Kliens cache. HUD-ban munkanélküliségi státusz jelzéséhez, vagy más kliens scriptek kondicionálásához.</div>
        <div class="cl">Lua példa – fvg-hud</div>
        <code>-- HUD munkanélküli ikon megjelenítés
CreateThread(function()
    while true do
        Wait(5000)
        local isUnempl = exports['fvg-unemployment']:IsLocalUnemployed()
        SendNUIMessage({ action = 'setUnemployed', value = isUnempl })
    end
end)</code>
    </div>
</section>

<section>
    <div class="st">Szerver esemény lista</div>
    <div class="card">
        <table>
            <thead><tr><th>Esemény</th><th>Paraméterek</th><th>Leírás</th></tr></thead>
            <tbody>
                <tr><td class="pn">fvg-unemployment:server:BenefitClaimed</td><td class="pt">src, amount</td>      <td>Segély igénylésekor</td></tr>
                <tr><td class="pn">fvg-unemployment:server:JobApplied</td>    <td class="pt">src, jobId</td>       <td>Állásba lépéskor</td></tr>
                <tr><td class="pn">fvg-unemployment:server:TaskCompleted</td> <td class="pt">src, taskId, reward</td><td>Napi feladat teljesítésekor</td></tr>
                <tr><td class="pn">fvg-unemployment:client:DataUpdated</td>   <td class="pt">localData</td>        <td>Kliens cache frissülésekor</td></tr>
            </tbody>
        </table>
    </div>
</section>

<section>
    <div class="st">Interaktív export demo</div>
    <div class="card">
        <div class="dgrid">
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-money-receive-02"></i>ClaimBenefit szimuláció</div>
                <div style="font-size:11px;color:var(--tm)">Igénylések: <span id="d-claims">0</span> / 8 | Egyenleg: $<span id="d-balance">0</span></div>
                <button class="dbtn bs" onclick="demoClaim()"><i class="hgi-stroke hgi-money-receive-02"></i>ClaimBenefit</button>
                <button class="dbtn bd" onclick="demoReset()" style="margin-top:2px"><i class="hgi-stroke hgi-reset"></i>Reset (kirúgás)</button>
                <div class="dout" id="d-claim-out"></div>
            </div>
            <div class="dc">
                <div class="dct"><i class="hgi-stroke hgi-briefcase-02"></i>ApplyForJob szimuláció</div>
                <select class="dsel" id="d-job">
                    <option value="taxi">taxi – Taxisofőr</option>
                    <option value="trucker">trucker – Kamionsofőr</option>
                    <option value="fisherman">fisherman – Halász</option>
                    <option value="farmer">farmer – Farmer</option>
                </select>
                <button class="dbtn bs" onclick="demoApply()"><i class="hgi-stroke hgi-checkmark-circle-02"></i>ApplyForJob</button>
                <button class="dbtn ba" onclick="demoIsUnemp()"><i class="hgi-stroke hgi-search-02"></i>IsUnemployed</button>
                <div class="dout" id="d-job-out"></div>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="st">Ajánlott indítási sorrend (server.cfg)</div>
    <div class="card">
        <code>ensure oxmysql
ensure fvg-database
ensure fvg-playercore
ensure fvg-notify
ensure fvg-banking
ensure fvg-identity
ensure fvg-idcard
ensure fvg-inventory
ensure fvg-dispatch
ensure fvg-unemployment   # ← itt
ensure fvg-admin
ensure fvg-hud</code>
    </div>
</section>

<script>
    let simClaims = 0;
    let simBal    = 0;
    let simJob    = 'unemployed';
    const maxClaims = 8;
    const benefitAmt = 500;
    let lastClaim = 0;
    const cooldown = 3600;

    function demoClaim() {
        const el = document.getElementById('d-claim-out');
        if (simJob !== 'unemployed') {
            el.className='dout err'; el.textContent='→ ClaimBenefit() = false – Nem munkanélküli'; return;
        }
        if (simClaims >= maxClaims) {
            el.className='dout err'; el.textContent='→ ClaimBenefit() = false – Limit elérve'; return;
        }
        const now = Date.now() / 1000;
        if (lastClaim && now - lastClaim < 10) {
            el.className='dout err'; el.textContent=`→ ClaimBenefit() = false – Cooldown aktív`; return;
        }
        simClaims++;
        simBal += benefitAmt;
        lastClaim = now;
        document.getElementById('d-claims').textContent  = simClaims;
        document.getElementById('d-balance').textContent = simBal;
        el.className='dout ok'; el.innerHTML=`→ ClaimBenefit() = <strong>true</strong> | +$${benefitAmt} | igénylések: ${simClaims}/${maxClaims}`;
    }

    function demoReset() {
        simClaims = 0; simJob = 'unemployed'; lastClaim = 0;
        document.getElementById('d-claims').textContent = 0;
        document.getElementById('d-claim-out').className='dout ok';
        document.getElementById('d-claim-out').textContent='→ Reset: segélyigénylések nullázva, jogosultság visszaállítva';
    }

    function demoApply() {
        const jobId = document.getElementById('d-job').value;
        const el = document.getElementById('d-job-out');
        if (simJob !== 'unemployed') {
            el.className='dout err'; el.textContent=`→ ApplyForJob() = false – már dolgozol: '${simJob}'`; return;
        }
        simJob = jobId; simClaims = 0;
        document.getElementById('d-claims').textContent = 0;
        el.className='dout ok'; el.innerHTML=`→ ApplyForJob('<span style="color:#22c55e">${jobId}</span>') = <strong>true</strong> | job: '${jobId}'`;
    }

    function demoIsUnemp() {
        const el = document.getElementById('d-job-out');
        const is = simJob === 'unemployed';
        el.className = 'dout ' + (is ? 'ok' : 'err');
        el.innerHTML = `→ IsUnemployed() = <strong style="color:${is?'#22c55e':'#ef4444'}">${is}</strong> (job: '${simJob}')`;
    }
</script>
</body>
</html>